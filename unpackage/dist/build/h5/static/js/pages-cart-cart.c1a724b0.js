(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-cart-cart"],{2771:function(t,e){var a="http://192.168.1.114:8360/api/";t.exports={ApiRootUrl:a,IndexUrl:a+"index/index",CatalogList:a+"catalog/index",CatalogCurrent:a+"catalog/current",AuthLoginByWeixin:a+"auth/loginByWeixin",GoodsCount:a+"goods/count",GoodsList:a+"goods/list",GoodsCategory:a+"goods/category",GoodsDetail:a+"goods/detail",GoodsNew:a+"goods/new",GoodsHot:a+"goods/hot",GoodsRelated:a+"goods/related",BrandList:a+"brand/list",BrandDetail:a+"brand/detail",CartList:a+"cart/index",CartAdd:a+"cart/add",CartUpdate:a+"cart/update",CartDelete:a+"cart/delete",CartChecked:a+"cart/checked",CartGoodsCount:a+"cart/goodscount",CartCheckout:a+"cart/checkout",OrderSubmit:a+"order/submit",PayPrepayId:a+"pay/prepay",CollectList:a+"collect/list",CollectAddOrDelete:a+"collect/addordelete",CommentList:a+"comment/list",CommentCount:a+"comment/count",CommentPost:a+"comment/post",TopicList:a+"topic/list",TopicDetail:a+"topic/detail",TopicRelated:a+"topic/related",SearchIndex:a+"search/index",SearchResult:a+"search/result",SearchHelper:a+"search/helper",SearchClearHistory:a+"search/clearhistory",AddressList:a+"address/list",AddressDetail:a+"address/detail",AddressSave:a+"address/save",AddressDelete:a+"address/delete",RegionList:a+"region/list",OrderList:a+"order/list",OrderDetail:a+"order/detail",OrderCancel:a+"order/cancel",OrderExpress:a+"order/express",FootprintList:a+"footprint/list",FootprintDelete:a+"footprint/delete"}},"2e67":function(t,e,a){(function(e){a("d81d"),a("d401"),a("d3b7"),a("25f0");var i=a("2771");function o(t){return t=t.toString(),t[1]?t:"0"+t}function n(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(d,s){uni.request({url:t,data:a,method:o,header:{"Content-Type":"application/json","X-Nideshop-Token":uni.getStorageSync("token")},success:function(t){if(e("log","success"," at utils/util.js:32"),200==t.statusCode){if(401==t.data.errno){var a=null;return r().then((function(t){return a=t.code,c()})).then((function(t){n(i.AuthLoginByWeixin,{code:a,userInfo:t},"POST").then((function(t){0===t.errno?(uni.setStorageSync("userInfo",t.data.userInfo),uni.setStorageSync("token",t.data.token),d(t)):s(t)})).catch((function(t){s(t)}))})).catch((function(t){s(t)}))}d(t.data)}else s(t.errMsg)},fail:function(t){s(t),e("log","failed"," at utils/util.js:79")}})}))}function r(){return new Promise((function(t,e){uni.login({success:function(a){a.code?t(a.code):e(a)},fail:function(t){e(t)}})}))}function c(){return new Promise((function(t,e){uni.getUserInfo({withCredentials:!0,success:function(a){"getUserInfo:ok"===a.detail.errMsg?t(a):e(a)},fail:function(t){e(t)}})}))}t.exports={formatTime:function(t){var e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),r=t.getMinutes(),c=t.getSeconds();return[e,a,i].map(o).join("-")+" "+[n,r,c].map(o).join(":")},request:n,get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(t,e,"GET")},post:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return n(t,e,"POST")},redirect:function(t){uni.redirectTo({url:t})},showErrorToast:function(t){uni.showToast({title:t,image:"/static/static/images/icon_error.png"})},checkSession:function(){return new Promise((function(t,e){uni.checkSession({success:function(){t(!0)},fail:function(){e(!1)}})}))},login:r,getUserInfo:c}}).call(this,a("0de9")["log"])},3811:function(t,e,a){"use strict";var i=a("59a9"),o=a.n(i);o.a},"55a3":function(t,e,a){"use strict";a.r(e);var i=a("905d"),o=a.n(i);for(var n in i)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(n);e["default"]=o.a},"59a9":function(t,e,a){var i=a("f633");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var o=a("4f06").default;o("487b4a1c",i,!0,{sourceMap:!1,shadowMode:!1})},"6d5f":function(t,e,a){"use strict";a.r(e);var i=a("c554"),o=a("55a3");for(var n in o)["default"].indexOf(n)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(n);a("3811");var r=a("f0c5"),c=Object(r["a"])(o["default"],i["b"],i["c"],!1,null,"19817985",null,!1,i["a"],void 0);e["default"]=c.exports},"905d":function(t,e,a){"use strict";(function(t){a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("d3b7"),a("d81d"),a("159b"),a("4de4");var i=a("2e67"),o=a("2771"),n=(getApp(),{data:function(){return{cartGoods:[],cartTotal:{goodsCount:0,goodsAmount:0,checkedGoodsCount:0,checkedGoodsAmount:0},isEditCart:!1,checkedAllStatus:!0,editCartList:[]}},onLoad:function(t){},onReady:function(){},onShow:function(){this.getCartList()},onHide:function(){},onUnload:function(){},methods:{getCartList:function(){var e=this;i.request(o.CartList).then((function(a){0===a.errno&&(t("log",a.data," at pages/cart/cart.vue:126"),e.setData({cartGoods:a.data.cartList,cartTotal:a.data.cartTotal})),e.setData({checkedAllStatus:e.isCheckedAll()})}))},isCheckedAll:function(){return this.cartGoods.every((function(t,e,a){return 1==t.checked}))},checkedItem:function(e){var a=e.target.dataset.itemIndex,n=this;if(this.isEditCart){var r=this.cartGoods.map((function(t,e,i){return e==a&&(t.checked=!t.checked),t}));n.setData({cartGoods:r,checkedAllStatus:n.isCheckedAll(),"cartTotal.checkedGoodsCount":n.getCheckedGoodsCount()})}else i.request(o.CartChecked,{productIds:n.cartGoods[a].product_id,isChecked:n.cartGoods[a].checked?0:1},"POST").then((function(e){0===e.errno&&(t("log",e.data," at pages/cart/cart.vue:164"),n.setData({cartGoods:e.data.cartList,cartTotal:e.data.cartTotal})),n.setData({checkedAllStatus:n.isCheckedAll()})}))},getCheckedGoodsCount:function(){var e=0;return this.cartGoods.forEach((function(t){!0===t.checked&&(e+=t.number)})),t("log",e," at pages/cart/cart.vue:199"),e},checkedAll:function(){var e=this;if(this.isEditCart){var a=e.isCheckedAll(),n=this.cartGoods.map((function(t){return t.checked=!a,t}));e.setData({cartGoods:n,checkedAllStatus:e.isCheckedAll(),"cartTotal.checkedGoodsCount":e.getCheckedGoodsCount()})}else{var r=this.cartGoods.map((function(t){return t.product_id}));i.request(o.CartChecked,{productIds:r.join(","),isChecked:e.isCheckedAll()?0:1},"POST").then((function(a){0===a.errno&&(t("log",a.data," at pages/cart/cart.vue:219"),e.setData({cartGoods:a.data.cartList,cartTotal:a.data.cartTotal})),e.setData({checkedAllStatus:e.isCheckedAll()})}))}},editCart:function(){if(this.isEditCart)this.getCartList(),this.setData({isEditCart:!this.isEditCart});else{var t=this.cartGoods.map((function(t){return t.checked=!1,t}));this.setData({editCartList:this.cartGoods,cartGoods:t,isEditCart:!this.isEditCart,checkedAllStatus:this.isCheckedAll(),"cartTotal.checkedGoodsCount":this.getCheckedGoodsCount()})}},updateCart:function(e,a,n,r){var c=this;i.request(o.CartUpdate,{productId:e,goodsId:a,number:n,id:r},"POST").then((function(e){0===e.errno&&t("log",e.data," at pages/cart/cart.vue:282"),c.setData({checkedAllStatus:c.isCheckedAll()})}))},cutNumber:function(t){var e=t.target.dataset.itemIndex,a=this.cartGoods[e],i=a.number-1>1?a.number-1:1;a.number=i,this.setData({cartGoods:this.cartGoods}),this.updateCart(a.product_id,a.goods_id,i,a.id)},addNumber:function(t){var e=t.target.dataset.itemIndex,a=this.cartGoods[e],i=a.number+1;a.number=i,this.setData({cartGoods:this.cartGoods}),this.updateCart(a.product_id,a.goods_id,i,a.id)},checkoutOrder:function(){var t=this.cartGoods.filter((function(t,e,a){return 1==t.checked}));if(t.length<=0)return!1;uni.navigateTo({url:"../shopping/checkout/checkout"})},deleteCart:function(){var e=this,a=this.cartGoods.filter((function(t,e,a){return 1==t.checked}));if(a.length<=0)return!1;a=a.map((function(t,e,a){if(1==t.checked)return t.product_id})),i.request(o.CartDelete,{productIds:a.join(",")},"POST").then((function(a){if(0===a.errno){t("log",a.data," at pages/cart/cart.vue:361");var i=a.data.cartList.map((function(e){return t("log",e," at pages/cart/cart.vue:363"),e.checked=!1,e}));e.setData({cartGoods:i,cartTotal:a.data.cartTotal})}e.setData({checkedAllStatus:e.isCheckedAll()})}))}}});e.default=n}).call(this,a("0de9")["log"])},c554:function(t,e,a){"use strict";a.d(e,"b",(function(){return i})),a.d(e,"c",(function(){return o})),a.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"service-policy"},[a("v-uni-view",{staticClass:"item"},[t._v("30天无忧退货")]),a("v-uni-view",{staticClass:"item"},[t._v("48小时快速退款")]),a("v-uni-view",{staticClass:"item"},[t._v("满88元免邮费")])],1),t.cartGoods.length<=0?a("v-uni-view",{staticClass:"no-cart"},[a("v-uni-view",{staticClass:"c"},[a("v-uni-image",{attrs:{src:"http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/noCart-a8fe3f12e5.png"}}),a("v-uni-text",[t._v("去添加点什么吧")])],1)],1):t._e(),t.cartGoods.length>0?a("v-uni-view",{staticClass:"cart-view"},[a("v-uni-view",{staticClass:"list"},[a("v-uni-view",{staticClass:"group-item"},[a("v-uni-view",{staticClass:"goods"},t._l(t.cartGoods,(function(e,i){return a("v-uni-view",{key:e.id,class:"item "+(t.isEditCart?"edit":"")},[a("v-uni-view",{class:"checkbox "+(e.checked?"checked":""),attrs:{"data-item-index":i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkedItem.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"cart-goods"},[a("v-uni-image",{staticClass:"img",attrs:{src:e.list_pic_url}}),a("v-uni-view",{staticClass:"info"},[a("v-uni-view",{staticClass:"t"},[a("v-uni-text",{staticClass:"name"},[t._v(t._s(e.goods_name))]),a("v-uni-text",{staticClass:"num"},[t._v("x"+t._s(e.number))])],1),a("v-uni-view",{staticClass:"attr"},[t._v(t._s(t.isEditCart?"已选择:":"")+t._s(e.goods_specifition_name_value))]),a("v-uni-view",{staticClass:"b"},[a("v-uni-text",{staticClass:"price"},[t._v("￥"+t._s(e.retail_price))]),a("v-uni-view",{staticClass:"selnum"},[a("v-uni-view",{staticClass:"cut",attrs:{"data-item-index":i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.cutNumber.apply(void 0,arguments)}}},[t._v("-")]),a("v-uni-input",{staticClass:"number",attrs:{value:e.number,disabled:!0,type:"number"}}),a("v-uni-view",{staticClass:"add",attrs:{"data-item-index":i},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addNumber.apply(void 0,arguments)}}},[t._v("+")])],1)],1)],1)],1)],1)})),1)],1)],1),a("v-uni-view",{staticClass:"cart-bottom"},[a("v-uni-view",{class:"checkbox "+(t.checkedAllStatus?"checked":""),on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkedAll.apply(void 0,arguments)}}},[t._v("全选("+t._s(t.cartTotal.checkedGoodsCount)+")")]),a("v-uni-view",{staticClass:"total"},[t._v(t._s(t.isEditCart?"":"￥"+t.cartTotal.checkedGoodsAmount))]),a("v-uni-view",{staticClass:"delete",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.editCart.apply(void 0,arguments)}}},[t._v(t._s(t.isEditCart?"完成":"编辑"))]),t.isEditCart?a("v-uni-view",{staticClass:"checkout",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deleteCart.apply(void 0,arguments)}}},[t._v("删除所选")]):t._e(),t.isEditCart?t._e():a("v-uni-view",{staticClass:"checkout",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.checkoutOrder.apply(void 0,arguments)}}},[t._v("下单")])],1)],1):t._e()],1)},o=[]},f633:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-19817985]{height:100%;min-height:100%;background:#f4f4f4}body.?%PAGE?%[data-v-19817985]{background:#f4f4f4}.container[data-v-19817985]{background:#f4f4f4;width:100%;height:auto;min-height:100%;overflow:hidden}.service-policy[data-v-19817985]{width:%?750?%;height:%?73?%;background:#f4f4f4;padding:0 %?31.25?%;display:flex;flex-flow:row nowrap;align-items:center;justify-content:space-between}.service-policy .item[data-v-19817985]{background:url(http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/servicePolicyRed-518d32d74b.png) 0 no-repeat;background-size:%?10?%;padding-left:%?15?%;display:flex;align-items:center;font-size:%?25?%;color:#666}.no-cart[data-v-19817985]{width:100%;height:auto;margin:0 auto}.no-cart .c[data-v-19817985]{width:100%;height:auto;margin-top:%?200?%}.no-cart .c uni-image[data-v-19817985]{margin:0 auto;display:block;text-align:center;width:%?258?%;height:%?258?%}.no-cart .c uni-text[data-v-19817985]{margin:0 auto;display:block;width:%?258?%;height:%?29?%;line-height:%?29?%;text-align:center;font-size:%?29?%;color:#999}.cart-view[data-v-19817985]{width:100%;height:auto;overflow:hidden}.cart-view .list[data-v-19817985]{height:auto;width:100%;overflow:hidden;margin-bottom:%?120?%}.cart-view .group-item[data-v-19817985]{height:auto;width:100%;background:#fff;margin-bottom:%?18?%}.cart-view .item[data-v-19817985]{height:%?164?%;width:100%;overflow:hidden}.cart-view .item .checkbox[data-v-19817985]{float:left;height:%?34?%;width:%?34?%;margin:%?65?% %?18?% %?65?% %?26?%;background:url(http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/checkbox-0e09baa37e.png) no-repeat;background-size:%?34?%}.cart-view .item .checkbox.checked[data-v-19817985]{background:url(http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/checkbox-checked-822e54472a.png) no-repeat;background-size:%?34?%}.cart-view .item .cart-goods[data-v-19817985]{float:left;height:%?164?%;width:%?672?%;border-bottom:1px solid #f4f4f4}.cart-view .item .img[data-v-19817985]{float:left;height:%?125?%;width:%?125?%;background:#f4f4f4;margin:%?19.5?% %?18?% %?19.5?% 0}.cart-view .item .info[data-v-19817985]{float:left;height:%?125?%;width:%?503?%;margin:%?19.5?% %?26?% %?19.5?% 0}.cart-view .item .t[data-v-19817985]{margin:%?8?% 0;height:%?28?%;font-size:%?25?%;color:#333;overflow:hidden}.cart-view .item .name[data-v-19817985]{height:%?28?%;max-width:%?310?%;line-height:%?28?%;font-size:%?25?%;color:#333;overflow:hidden}.cart-view .item .num[data-v-19817985]{height:%?28?%;line-height:%?28?%;float:right}.cart-view .item .attr[data-v-19817985]{margin-bottom:%?17?%;height:%?24?%;line-height:%?24?%;font-size:%?22?%;color:#666;overflow:hidden}.cart-view .item .b[data-v-19817985]{height:%?28?%;line-height:%?28?%;font-size:%?25?%;color:#333;overflow:hidden}.cart-view .item .price[data-v-19817985]{float:left}.cart-view .item .open[data-v-19817985]{height:%?28?%;width:%?150?%;display:block;float:right;background:url(http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/arrowDown-d48093db25.png) 100% no-repeat;background-size:%?25?%;font-size:%?25?%;color:#333}.cart-view .item.edit .t[data-v-19817985]{display:none}.cart-view .item.edit .attr[data-v-19817985]{text-align:right;background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/icon-normal/arrow-right1-e9828c5b35.png) 100% no-repeat;padding-right:%?25?%;background-size:%?12?% %?20?%;margin-bottom:%?24?%;height:%?39?%;line-height:%?39?%;font-size:%?24?%;color:#999;overflow:hidden}.cart-view .item.edit .b[data-v-19817985]{display:flex;height:%?52?%;overflow:hidden}.cart-view .item.edit .price[data-v-19817985]{line-height:%?52?%;height:%?52?%;flex:1}.cart-view .item .selnum[data-v-19817985]{display:none}.cart-view .item.edit .selnum[data-v-19817985]{width:%?235?%;height:%?52?%;border:%?1?% solid #ccc;display:flex}.selnum .cut[data-v-19817985]{width:%?70?%;height:100%;text-align:center;line-height:%?50?%}.selnum .number[data-v-19817985]{flex:1;height:100%;text-align:center;line-height:%?68.75?%;border-left:1px solid #ccc;border-right:1px solid #ccc;float:left}.selnum .add[data-v-19817985]{width:%?80?%;height:100%;text-align:center;line-height:%?50?%}.cart-view .group-item .header[data-v-19817985]{width:100%;height:%?94?%;line-height:%?94?%;padding:0 %?26?%;border-bottom:1px solid #f4f4f4}.cart-view .promotion .icon[data-v-19817985]{display:inline-block;height:%?24?%;width:%?15?%}.cart-view .promotion[data-v-19817985]{margin-top:%?25.5?%;float:left;height:%?43?%;width:%?480?%;\n    /*margin-right: 84rpx;*/line-height:%?43?%;font-size:0}.cart-view .promotion .tag[data-v-19817985]{border:1px solid #f48f18;height:%?37?%;line-height:%?31?%;padding:0 %?9?%;margin-right:%?10?%;color:#f48f18;font-size:%?24.5?%}.cart-view .promotion .txt[data-v-19817985]{height:%?43?%;line-height:%?43?%;padding-right:%?10?%;color:#333;font-size:%?29?%;overflow:hidden}.cart-view .get[data-v-19817985]{margin-top:%?18?%;float:right;height:%?58?%;padding-left:%?14?%;border-left:1px solid #d9d9d9;line-height:%?58?%;font-size:%?29?%;color:#333}.cart-bottom[data-v-19817985]{position:fixed;\n    /* bottom: 0; */left:0;height:%?100?%;width:100%;background:#fff;display:flex}.cart-bottom .checkbox[data-v-19817985]{height:%?34?%;padding-left:%?60?%;line-height:%?34?%;margin:%?33?% %?18?% %?33?% %?26?%;background:url(http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/checkbox-0e09baa37e.png) no-repeat;background-size:%?34?%;font-size:%?29?%}.cart-bottom .checkbox.checked[data-v-19817985]{background:url(http://nos.netease.com/mailpub/hxm/yanxuan-wap/p/20150730/style/img/icon-normal/checkbox-checked-822e54472a.png) no-repeat;background-size:%?34?%}.cart-bottom .total[data-v-19817985]{height:%?34?%;flex:1;margin:%?33?% %?10?%;font-size:%?29?%}.cart-bottom .delete[data-v-19817985]{height:%?34?%;width:auto;margin:%?33?% %?18?%;font-size:%?29?%}.cart-bottom .checkout[data-v-19817985]{height:%?100?%;width:%?210?%;text-align:center;line-height:%?100?%;font-size:%?29?%;background:#b4282d;color:#fff}",""]),t.exports=e}}]);
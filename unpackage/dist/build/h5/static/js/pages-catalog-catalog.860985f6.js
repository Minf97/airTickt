(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-catalog-catalog"],{2771:function(t,e){var a="http://192.168.1.114:8360/api/";t.exports={ApiRootUrl:a,IndexUrl:a+"index/index",CatalogList:a+"catalog/index",CatalogCurrent:a+"catalog/current",AuthLoginByWeixin:a+"auth/loginByWeixin",GoodsCount:a+"goods/count",GoodsList:a+"goods/list",GoodsCategory:a+"goods/category",GoodsDetail:a+"goods/detail",GoodsNew:a+"goods/new",GoodsHot:a+"goods/hot",GoodsRelated:a+"goods/related",BrandList:a+"brand/list",BrandDetail:a+"brand/detail",CartList:a+"cart/index",CartAdd:a+"cart/add",CartUpdate:a+"cart/update",CartDelete:a+"cart/delete",CartChecked:a+"cart/checked",CartGoodsCount:a+"cart/goodscount",CartCheckout:a+"cart/checkout",OrderSubmit:a+"order/submit",PayPrepayId:a+"pay/prepay",CollectList:a+"collect/list",CollectAddOrDelete:a+"collect/addordelete",CommentList:a+"comment/list",CommentCount:a+"comment/count",CommentPost:a+"comment/post",TopicList:a+"topic/list",TopicDetail:a+"topic/detail",TopicRelated:a+"topic/related",SearchIndex:a+"search/index",SearchResult:a+"search/result",SearchHelper:a+"search/helper",SearchClearHistory:a+"search/clearhistory",AddressList:a+"address/list",AddressDetail:a+"address/detail",AddressSave:a+"address/save",AddressDelete:a+"address/delete",RegionList:a+"region/list",OrderList:a+"order/list",OrderDetail:a+"order/detail",OrderCancel:a+"order/cancel",OrderExpress:a+"order/express",FootprintList:a+"footprint/list",FootprintDelete:a+"footprint/delete"}},"2e67":function(t,e,a){(function(e){a("d81d"),a("d401"),a("d3b7"),a("25f0");var n=a("2771");function i(t){return t=t.toString(),t[1]?t:"0"+t}function o(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(c,d){uni.request({url:t,data:a,method:i,header:{"Content-Type":"application/json","X-Nideshop-Token":uni.getStorageSync("token")},success:function(t){if(e("log","success"," at utils/util.js:32"),200==t.statusCode){if(401==t.data.errno){var a=null;return r().then((function(t){return a=t.code,s()})).then((function(t){o(n.AuthLoginByWeixin,{code:a,userInfo:t},"POST").then((function(t){0===t.errno?(uni.setStorageSync("userInfo",t.data.userInfo),uni.setStorageSync("token",t.data.token),c(t)):d(t)})).catch((function(t){d(t)}))})).catch((function(t){d(t)}))}c(t.data)}else d(t.errMsg)},fail:function(t){d(t),e("log","failed"," at utils/util.js:79")}})}))}function r(){return new Promise((function(t,e){uni.login({success:function(a){a.code?t(a.code):e(a)},fail:function(t){e(t)}})}))}function s(){return new Promise((function(t,e){uni.getUserInfo({withCredentials:!0,success:function(a){"getUserInfo:ok"===a.detail.errMsg?t(a):e(a)},fail:function(t){e(t)}})}))}t.exports={formatTime:function(t){var e=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),o=t.getHours(),r=t.getMinutes(),s=t.getSeconds();return[e,a,n].map(i).join("-")+" "+[o,r,s].map(i).join(":")},request:o,get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t,e,"GET")},post:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t,e,"POST")},redirect:function(t){uni.redirectTo({url:t})},showErrorToast:function(t){uni.showToast({title:t,image:"/static/static/images/icon_error.png"})},checkSession:function(){return new Promise((function(t,e){uni.checkSession({success:function(){t(!0)},fail:function(){e(!1)}})}))},login:r,getUserInfo:s}}).call(this,a("0de9")["log"])},"521a":function(t,e,a){"use strict";a("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a("2e67"),i=a("2771"),o={data:function(){return{navList:[],categoryList:[],currentCategory:{id:"",wap_banner_url:"",front_name:"",name:"",subCategoryList:[]},scrollLeft:0,scrollTop:0,goodsCount:0,scrollHeight:0}},onLoad:function(t){this.getCatalog()},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},methods:{getCatalog:function(){var t=this;uni.showLoading({title:"加载中..."}),n.request(i.CatalogList).then((function(e){t.setData({navList:e.data.categoryList,currentCategory:e.data.currentCategory}),uni.hideLoading()})),n.request(i.GoodsCount).then((function(e){t.setData({goodsCount:e.data.goodsCount})}))},getCurrentCategory:function(t){var e=this;n.request(i.CatalogCurrent,{id:t}).then((function(t){e.setData({currentCategory:t.data.currentCategory})}))},getList:function(){var t=this;n.request(i.ApiRootUrl+"api/catalog/"+t.currentCategory.cat_id).then((function(e){t.setData({categoryList:e.data})}))},switchCate:function(t){t.currentTarget;if(this.currentCategory.id==t.currentTarget.dataset.id)return!1;this.getCurrentCategory(t.currentTarget.dataset.id)}}};e.default=o},5735:function(t,e,a){var n=a("24fb");e=n(!1),e.push([t.i,"uni-page-body[data-v-34839942]{height:100%}.container[data-v-34839942]{background:#f9f9f9;height:100%;width:100%;display:flex;flex-direction:column}.search[data-v-34839942]{height:%?88?%;width:100%;padding:0 %?30?%;background:#fff;display:flex;align-items:center}.search .input[data-v-34839942]{width:%?690?%;height:%?56?%;background:#ededed;border-radius:%?8?%;display:flex;align-items:center;justify-content:center}.search .icon[data-v-34839942]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/icon-normal/search2-2fb94833aa.png) 50% no-repeat;background-size:100%;width:%?28?%;height:%?28?%}.search .txt[data-v-34839942]{height:%?42?%;line-height:%?42?%;color:#666;padding-left:%?10?%;font-size:%?30?%}.catalog[data-v-34839942]{flex:1;width:100%;background:#fff;display:flex;border-top:1px solid #fafafa}.catalog .nav[data-v-34839942]{width:%?162?%;height:100%}.catalog .nav .item[data-v-34839942]{text-align:center;line-height:%?90?%;width:%?162?%;height:%?90?%;color:#333;font-size:%?28?%;border-left:%?6?% solid #fff}.catalog .nav .item.active[data-v-34839942]{color:#ab2b2b;font-size:%?36?%;border-left:%?6?% solid #ab2b2b}.catalog .cate[data-v-34839942]{border-left:1px solid #fafafa;flex:1;height:100%;padding:0 %?30?% 0 %?30?%}.banner[data-v-34839942]{display:block;height:%?222?%;width:100%;position:relative}.banner .image[data-v-34839942]{position:absolute;top:%?30?%;left:0;border-radius:%?4?%;height:%?192?%;width:100%}.banner .txt[data-v-34839942]{position:absolute;top:%?30?%;text-align:center;color:#fff;font-size:%?28?%;left:0;height:%?192?%;line-height:%?192?%;width:100%}.catalog .hd[data-v-34839942]{height:%?108?%;width:100%;display:flex;justify-content:center;align-items:center}.catalog .hd .txt[data-v-34839942]{font-size:%?24?%;text-align:center;color:#333;padding:0 %?10?%;width:auto}.catalog .hd .line[data-v-34839942]{width:%?40?%;height:1px;background:#d9d9d9}.catalog .bd[data-v-34839942]{height:auto;width:100%;overflow:hidden}.catalog .bd .item[data-v-34839942]{display:block;float:left;height:%?216?%;width:%?144?%;margin-right:%?34?%}.catalog .bd .item.last[data-v-34839942]{margin-right:0}.catalog .bd .item .icon[data-v-34839942]{height:%?144?%;width:%?144?%}.catalog .bd .item .txt[data-v-34839942]{display:block;text-align:center;font-size:%?24?%;color:#333;height:%?72?%;width:%?144?%}",""]),t.exports=e},"64ce":function(t,e,a){var n=a("5735");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var i=a("4f06").default;i("733235b1",n,!0,{sourceMap:!1,shadowMode:!1})},"6d97":function(t,e,a){"use strict";a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"container"},[a("v-uni-view",{staticClass:"search"},[a("v-uni-navigator",{staticClass:"input",attrs:{url:"/pages/search/search"}},[a("v-uni-image",{staticClass:"icon"}),a("v-uni-text",{staticClass:"txt"},[t._v("商品搜索, 共"+t._s(t.goodsCount)+"款好物")])],1)],1),a("v-uni-view",{staticClass:"catalog"},[a("v-uni-scroll-view",{staticClass:"nav",attrs:{"scroll-y":!0}},t._l(t.navList,(function(e,n){return a("v-uni-view",{key:n,class:"item "+(t.currentCategory.id==e.id?"active":""),attrs:{"data-id":e.id,"data-index":n},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.switchCate.apply(void 0,arguments)}}},[t._v(t._s(e.name))])})),1),a("v-uni-scroll-view",{staticClass:"cate",attrs:{"scroll-y":!0}},[a("v-uni-navigator",{staticClass:"banner",attrs:{url:"url"}},[a("v-uni-image",{staticClass:"image",attrs:{src:t.currentCategory.wap_banner_url}}),a("v-uni-view",{staticClass:"txt"},[t._v(t._s(t.currentCategory.front_name))])],1),a("v-uni-view",{staticClass:"hd"},[a("v-uni-text",{staticClass:"line"}),a("v-uni-text",{staticClass:"txt"},[t._v(t._s(t.currentCategory.name)+"分类")]),a("v-uni-text",{staticClass:"line"})],1),a("v-uni-view",{staticClass:"bd"},t._l(t.currentCategory.subCategoryList,(function(e,n){return a("v-uni-navigator",{key:n,class:"item "+((n+1)%3==0?"last":""),attrs:{url:"/pages/category/category?id="+e.id}},[a("v-uni-image",{staticClass:"icon",attrs:{src:e.wap_banner_url}}),a("v-uni-text",{staticClass:"txt"},[t._v(t._s(e.name))])],1)})),1)],1)],1)],1)},i=[]},"75c3":function(t,e,a){"use strict";a.r(e);var n=a("521a"),i=a.n(n);for(var o in n)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return n[t]}))}(o);e["default"]=i.a},d8c2:function(t,e,a){"use strict";var n=a("64ce"),i=a.n(n);i.a},e3ca:function(t,e,a){"use strict";a.r(e);var n=a("6d97"),i=a("75c3");for(var o in i)["default"].indexOf(o)<0&&function(t){a.d(e,t,(function(){return i[t]}))}(o);a("d8c2");var r=a("f0c5"),s=Object(r["a"])(i["default"],n["b"],n["c"],!1,null,"34839942",null,!1,n["a"],void 0);e["default"]=s.exports}}]);
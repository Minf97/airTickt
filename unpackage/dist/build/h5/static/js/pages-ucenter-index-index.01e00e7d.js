(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-ucenter-index-index"],{"0cdb":function(t,e,n){var i=n("24fb");e=i(!1),e.push([t.i,"uni-page-body[data-v-6c0b0e4d]{height:100%;width:100%;background:#f4f4f4}body.?%PAGE?%[data-v-6c0b0e4d]{background:#f4f4f4}.container[data-v-6c0b0e4d]{background:#f4f4f4;height:auto;overflow:hidden;width:100%}.profile-info[data-v-6c0b0e4d]{width:100%;height:%?280?%;display:flex;flex-wrap:wrap;align-items:center;justify-content:flex-start;padding:0 %?30.25?%;background:#333}.profile-info .avatar[data-v-6c0b0e4d]{height:%?148?%;width:%?148?%;border-radius:50%;border:%?4?% solid #fff}.profile-info .info[data-v-6c0b0e4d]{flex:1;height:%?85?%;margin-left:%?30?%;display:flex;flex-direction:column;justify-content:center}.profile-info .name[data-v-6c0b0e4d]{height:%?45?%;line-height:%?45?%;color:#fff;font-size:%?37.5?%}.profile-info .level[data-v-6c0b0e4d]{height:%?30?%;line-height:%?30?%;margin-top:%?10?%;color:#7f7f7f;font-size:%?30?%}.profile-info .btn[data-v-6c0b0e4d]{width:%?50?%;height:%?50?%;margin-left:%?10?%;border-radius:50%}.user-menu[data-v-6c0b0e4d]{width:100%;height:auto;overflow:hidden;background:#fff}.user-menu .item[data-v-6c0b0e4d]{float:left;width:33.33333%;height:%?187.5?%;border-right:1px solid rgba(0,0,0,.15);border-bottom:1px solid rgba(0,0,0,.15);text-align:center}.user-menu .item .a[data-v-6c0b0e4d]{display:flex;width:100%;height:100%;flex-direction:column;align-items:center;justify-content:center}.user-menu .item.no-border[data-v-6c0b0e4d]{border-right:0}.user-menu .item.item-bottom[data-v-6c0b0e4d]{border-bottom:none}.user-menu .icon[data-v-6c0b0e4d]{margin:0 auto;display:block;height:%?52.803?%;width:%?52.803?%;margin-bottom:%?16?%}.user-menu .icon.order[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-437.5?% no-repeat;background-size:%?52.803?%}.user-menu .icon.coupon[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-62.4997?% no-repeat;background-size:%?52.803?%}.user-menu .icon.gift[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-187.5?% no-repeat;background-size:%?52.803?%}.user-menu .icon.address[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 0 no-repeat;background-size:%?52.803?%}.user-menu .icon.security[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-500?% no-repeat;background-size:%?52.803?%}.user-menu .icon.kefu[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-312.5?% no-repeat;background-size:%?52.803?%}.user-menu .icon.help[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-250?% no-repeat;background-size:%?52.803?%}.user-menu .icon.feedback[data-v-6c0b0e4d]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/ucenter-sdf6a55ee56-f2c2b9c2f0.png) 0 %?-125?% no-repeat;background-size:%?52.803?%}.user-menu .txt[data-v-6c0b0e4d]{display:block;height:%?24?%;width:100%;font-size:%?24?%;color:#333}.logout[data-v-6c0b0e4d]{margin-top:%?50?%;height:%?101?%;width:100%;line-height:%?101?%;text-align:center;background:#fff;color:#333;font-size:%?30?%}.dialog-login[data-v-6c0b0e4d]{width:100%;height:100%;position:fixed;top:0;left:0;background:rgba(0,0,0,.5);display:flex;justify-content:center;align-items:center}.dialog-login .dialog-body[data-v-6c0b0e4d]{width:%?540?%;height:auto;overflow:hidden;background:#fff;border-radius:5px;padding:%?40?%}.dialog-login .dialog-body .title[data-v-6c0b0e4d]{width:100%;text-align:center;line-height:%?60?%}.dialog-login .dialog-body .content[data-v-6c0b0e4d]{width:100%}.dialog-login .dialog-body uni-button[data-v-6c0b0e4d]{margin-top:%?30?%}",""]),t.exports=e},"1e0a":function(t,e,n){"use strict";n.r(e);var i=n("8210"),a=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=a.a},2771:function(t,e){var n="http://192.168.1.114:8360/api/";t.exports={ApiRootUrl:n,IndexUrl:n+"index/index",CatalogList:n+"catalog/index",CatalogCurrent:n+"catalog/current",AuthLoginByWeixin:n+"auth/loginByWeixin",GoodsCount:n+"goods/count",GoodsList:n+"goods/list",GoodsCategory:n+"goods/category",GoodsDetail:n+"goods/detail",GoodsNew:n+"goods/new",GoodsHot:n+"goods/hot",GoodsRelated:n+"goods/related",BrandList:n+"brand/list",BrandDetail:n+"brand/detail",CartList:n+"cart/index",CartAdd:n+"cart/add",CartUpdate:n+"cart/update",CartDelete:n+"cart/delete",CartChecked:n+"cart/checked",CartGoodsCount:n+"cart/goodscount",CartCheckout:n+"cart/checkout",OrderSubmit:n+"order/submit",PayPrepayId:n+"pay/prepay",CollectList:n+"collect/list",CollectAddOrDelete:n+"collect/addordelete",CommentList:n+"comment/list",CommentCount:n+"comment/count",CommentPost:n+"comment/post",TopicList:n+"topic/list",TopicDetail:n+"topic/detail",TopicRelated:n+"topic/related",SearchIndex:n+"search/index",SearchResult:n+"search/result",SearchHelper:n+"search/helper",SearchClearHistory:n+"search/clearhistory",AddressList:n+"address/list",AddressDetail:n+"address/detail",AddressSave:n+"address/save",AddressDelete:n+"address/delete",RegionList:n+"region/list",OrderList:n+"order/list",OrderDetail:n+"order/detail",OrderCancel:n+"order/cancel",OrderExpress:n+"order/express",FootprintList:n+"footprint/list",FootprintDelete:n+"footprint/delete"}},"2e67":function(t,e,n){(function(e){n("d81d"),n("d401"),n("d3b7"),n("25f0");var i=n("2771");function a(t){return t=t.toString(),t[1]?t:"0"+t}function o(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET";return new Promise((function(c,u){uni.request({url:t,data:n,method:a,header:{"Content-Type":"application/json","X-Nideshop-Token":uni.getStorageSync("token")},success:function(t){if(e("log","success"," at utils/util.js:32"),200==t.statusCode){if(401==t.data.errno){var n=null;return s().then((function(t){return n=t.code,r()})).then((function(t){o(i.AuthLoginByWeixin,{code:n,userInfo:t},"POST").then((function(t){0===t.errno?(uni.setStorageSync("userInfo",t.data.userInfo),uni.setStorageSync("token",t.data.token),c(t)):u(t)})).catch((function(t){u(t)}))})).catch((function(t){u(t)}))}c(t.data)}else u(t.errMsg)},fail:function(t){u(t),e("log","failed"," at utils/util.js:79")}})}))}function s(){return new Promise((function(t,e){uni.login({success:function(n){n.code?t(n.code):e(n)},fail:function(t){e(t)}})}))}function r(){return new Promise((function(t,e){uni.getUserInfo({withCredentials:!0,success:function(n){"getUserInfo:ok"===n.detail.errMsg?t(n):e(n)},fail:function(t){e(t)}})}))}t.exports={formatTime:function(t){var e=t.getFullYear(),n=t.getMonth()+1,i=t.getDate(),o=t.getHours(),s=t.getMinutes(),r=t.getSeconds();return[e,n,i].map(a).join("-")+" "+[o,s,r].map(a).join(":")},request:o,get:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t,e,"GET")},post:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return o(t,e,"POST")},redirect:function(t){uni.redirectTo({url:t})},showErrorToast:function(t){uni.showToast({title:t,image:"/static/static/images/icon_error.png"})},checkSession:function(){return new Promise((function(t,e){uni.checkSession({success:function(){t(!0)},fail:function(){e(!1)}})}))},login:s,getUserInfo:r}}).call(this,n("0de9")["log"])},"485a4":function(t,e,n){"use strict";var i=n("aa8c"),a=n.n(i);a.a},8210:function(t,e,n){"use strict";(function(t){n("7a82"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,n("4d63"),n("c607"),n("ac1f"),n("2c3e"),n("25f0"),n("466d"),n("841c"),n("00b4"),n("e9c4");var i=n("2e67"),a=n("2771"),o=(n("c464"),getApp()),s={data:function(){return{userInfo:{avatar:"",nickname:""},showLoginDialog:!1}},onLoad:function(t){var e=this.isWx();if(e&&!uni.getStorageSync("token")){var n=this.getUrlParam("code"),i=encodeURIComponent("http://static-3df7fbd1-8be5-4faa-affb-73c9463c6baa.bspapp.com/#/pages/ucenter/index/index");null==n||""===n?window.location.href="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wxb316fcad56ffb1ce&redirect_uri="+i+"&response_type=code&scope=snsapi_base&connect_redirect=1&state=#wechat_redirect":this.getOpenId(n,{})}},onReady:function(){},onShow:function(){this.setData({userInfo:o.globalData.userInfo})},onHide:function(){},onUnload:function(){},methods:{loginWithWx:function(){uni.getStorageSync("openid")&&void 0!=uni.getStorageSync("openid")||this.getWxUserInfoCode()},getUrlParam:function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null},isWx:function(){var t=navigator.userAgent.toLowerCase();return!!/micromessenger/.test(t)},onLogin:function(){var t=this.isWx();t||uni.navigateTo({url:"/pages/auth/login/login"})},getOpenId:function(e,n){var s=this;t("log",e,n," at pages/ucenter/index/index.vue:187");i.request(a.AuthLoginByWeixin,{code:e,userInfo:n},"POST").then((function(e){if(t("log",e," at pages/ucenter/index/index.vue:196"),0!==e.errno)return uni.showToast({title:"微信登录失败"}),!1;s.setData({userInfo:e.data.userInfo,showLoginDialog:!1}),o.globalData.userInfo=e.data.userInfo,o.globalData.token=e.data.token,uni.setStorageSync("userInfo",JSON.stringify(e.data.userInfo)),uni.setStorageSync("token",e.data.token)})).catch((function(e){t("log",e," at pages/ucenter/index/index.vue:215")}))},onUserInfoClick:function(){uni.getStorageSync("token")||this.showLoginDialogFun()},showLoginDialogFun:function(){this.setData({showLoginDialog:!0})},onCloseLoginDialog:function(){this.setData({showLoginDialog:!1})},onDialogBody:function(){},onWechatLogin:function(e){var n=this;if("getUserInfo:ok"!==e.detail.errMsg)return"getUserInfo:fail auth deny"===e.detail.errMsg||uni.showToast({title:"微信登录失败"}),!1;i.login().then((function(t){return i.request(a.AuthLoginByWeixin,{code:t,userInfo:e.detail},"POST")})).then((function(e){if(t("log",e," at pages/ucenter/index/index.vue:264"),0!==e.errno)return uni.showToast({title:"微信登录失败"}),!1;n.setData({userInfo:e.data.userInfo,showLoginDialog:!1}),o.globalData.userInfo=e.data.userInfo,o.globalData.token=e.data.token,uni.setStorageSync("userInfo",JSON.stringify(e.data.userInfo)),uni.setStorageSync("token",e.data.token)})).catch((function(e){t("log",e," at pages/ucenter/index/index.vue:283")}))},onOrderInfoClick:function(t){uni.navigateTo({url:"/pages/ucenter/order/order"})},onSectionItemClick:function(t){},exitLogin:function(){uni.showModal({title:"",confirmColor:"#b4282d",content:"退出登录？",success:function(t){t.confirm&&(uni.removeStorageSync("token"),uni.removeStorageSync("userInfo"),uni.switchTab({url:"/pages/index/index"}))}})}}};e.default=s}).call(this,n("0de9")["log"])},9834:function(t,e,n){"use strict";n.r(e);var i=n("fe20"),a=n("1e0a");for(var o in a)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(o);n("485a4");var s=n("f0c5"),r=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,"6c0b0e4d",null,!1,i["a"],void 0);e["default"]=r.exports},aa8c:function(t,e,n){var i=n("0cdb");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var a=n("4f06").default;a("56b37170",i,!0,{sourceMap:!1,shadowMode:!1})},c464:function(t,e,n){n("d3b7");var i=n("2e67"),a=n("2771");t.exports={loginByWeixin:function(){var t=null;return new Promise((function(e,n){return i.login().then((function(e){return t=e.code,i.getUserInfo()})).then((function(o){i.request(a.AuthLoginByWeixin,{code:t,userInfo:o},"POST").then((function(t){0===t.errno?(uni.setStorageSync("userInfo",t.data.userInfo),uni.setStorageSync("token",t.data.token),e(t)):n(t)})).catch((function(t){n(t)}))})).catch((function(t){n(t)}))}))},checkLogin:function(){return new Promise((function(t,e){uni.getStorageSync("userInfo")&&uni.getStorageSync("token")?i.checkSession().then((function(){t(!0)})).catch((function(){e(!1)})):e(!1)}))}}},fe20:function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-uni-view",[n("v-uni-view",{staticClass:"container"},[n("v-uni-view",{staticClass:"profile-info"},[n("v-uni-image",{staticClass:"avatar",attrs:{src:t.userInfo.avatar},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onUserInfoClick.apply(void 0,arguments)}}}),n("v-uni-view",{staticClass:"info"},[n("v-uni-text",{staticClass:"name",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onUserInfoClick.apply(void 0,arguments)}}},[t._v(t._s(t.userInfo.nickname||"点击登录"))])],1),n("v-uni-image",{staticClass:"btn",attrs:{src:"/static/static/images/address_right.png"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onUserInfoClick.apply(void 0,arguments)}}})],1),n("v-uni-view",{staticClass:"user-menu"},[n("v-uni-view",{staticClass:"item"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"/pages/ucenter/order/order"}},[n("v-uni-text",{staticClass:"icon order"}),n("v-uni-text",{staticClass:"txt"},[t._v("我的订单")])],1)],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"/pages/ucenter/coupon/coupon"}},[n("v-uni-text",{staticClass:"icon coupon"}),n("v-uni-text",{staticClass:"txt"},[t._v("优惠券")])],1)],1),n("v-uni-view",{staticClass:"item no-border"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"url"}},[n("v-uni-text",{staticClass:"icon gift"}),n("v-uni-text",{staticClass:"txt"},[t._v("礼品卡")])],1)],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"/pages/ucenter/collect/collect"}},[n("v-uni-text",{staticClass:"icon address"}),n("v-uni-text",{staticClass:"txt"},[t._v("我的收藏")])],1)],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"/pages/ucenter/footprint/footprint"}},[n("v-uni-text",{staticClass:"icon security"}),n("v-uni-text",{staticClass:"txt"},[t._v("我的足迹")])],1)],1),n("v-uni-view",{staticClass:"item no-border"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"url"}},[n("v-uni-text",{staticClass:"icon kefu"}),n("v-uni-text",{staticClass:"txt"},[t._v("会员福利")])],1)],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"../address/address"}},[n("v-uni-text",{staticClass:"icon address"}),n("v-uni-text",{staticClass:"txt"},[t._v("地址管理")])],1)],1),n("v-uni-view",{staticClass:"item"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"url"}},[n("v-uni-text",{staticClass:"icon security"}),n("v-uni-text",{staticClass:"txt"},[t._v("账号安全")])],1)],1),n("v-uni-view",{staticClass:"item no-border"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"url"}},[n("v-uni-text",{staticClass:"icon kefu"}),n("v-uni-text",{staticClass:"txt"},[t._v("联系客服")])],1)],1),n("v-uni-view",{staticClass:"item item-bottom"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"url"}},[n("v-uni-text",{staticClass:"icon help"}),n("v-uni-text",{staticClass:"txt"},[t._v("帮助中心")])],1)],1),n("v-uni-view",{staticClass:"item item-bottom"},[n("v-uni-navigator",{staticClass:"a",attrs:{url:"/pages/ucenter/feedback/feedback"}},[n("v-uni-text",{staticClass:"icon feedback"}),n("v-uni-text",{staticClass:"txt"},[t._v("意见反馈")])],1)],1)],1)],1),t.showLoginDialog?n("v-uni-view",{staticClass:"dialog-login",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onCloseLoginDialog.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"dialog-body",on:{click:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e),t.onDialogBody.apply(void 0,arguments)}}},[n("v-uni-view",{staticClass:"title"},[t._v("请选择登录方式")]),n("v-uni-view",{staticClass:"content"},[n("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.onLogin.apply(void 0,arguments)}}},[t._v("手机登录")])],1)],1)],1):t._e()],1)},a=[]}}]);
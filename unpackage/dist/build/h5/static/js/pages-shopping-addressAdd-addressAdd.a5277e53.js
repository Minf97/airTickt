(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-shopping-addressAdd-addressAdd"],{"0562":function(e,t,i){var n=i("24fb");t=n(!1),t.push([e.i,"uni-page-body[data-v-2fae9870]{height:100%;background:#f4f4f4}body.?%PAGE?%[data-v-2fae9870]{background:#f4f4f4}.add-address .add-form[data-v-2fae9870]{background:#fff;width:100%;height:auto;overflow:hidden}.add-address .form-item[data-v-2fae9870]{height:%?116?%;padding-left:%?31.25?%;border-bottom:1px solid #d9d9d9;display:flex;align-items:center;padding-right:%?31.25?%}.add-address .input[data-v-2fae9870]{flex:1;height:%?44?%;line-height:%?44?%;overflow:hidden}.add-address .form-default[data-v-2fae9870]{border-bottom:1px solid #d9d9d9;height:%?96?%;background:#fafafa;padding-top:%?28?%;font-size:%?28?%}.default-input[data-v-2fae9870]{margin:0 auto;display:block;width:%?240?%;height:%?40?%;padding-left:%?50?%;line-height:%?40?%;background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/checkbox-sed825af9d3-a6b8540d42.png) %?1?% %?-448?% no-repeat;background-size:%?38?% %?486?%;font-size:%?28?%}.default-input.selected[data-v-2fae9870]{background:url(http://yanxuan.nosdn.127.net/hxm/yanxuan-wap/p/20161201/style/img/sprites/checkbox-sed825af9d3-a6b8540d42.png) 0 %?-192?% no-repeat;background-size:%?38?% %?486?%}.add-address .btns[data-v-2fae9870]{position:fixed;bottom:0;left:0;overflow:hidden;display:flex;height:%?100?%;width:100%}.add-address .cannel[data-v-2fae9870],\n.add-address .save[data-v-2fae9870]{flex:1;height:%?100?%;text-align:center;line-height:%?100?%;font-size:%?28?%;color:#fff;border:none;border-radius:0}.add-address .cannel[data-v-2fae9870]{background:#333}.add-address .save[data-v-2fae9870]{background:#b4282d}.region-select[data-v-2fae9870]{width:100%;height:%?600?%;background:#fff;position:fixed;z-index:10;left:0;bottom:0}.region-select .hd[data-v-2fae9870]{height:%?108?%;width:100%;border-bottom:1px solid #f4f4f4;padding:%?46?% %?30?% 0 %?30?%}.region-select .region-selected[data-v-2fae9870]{float:left;height:%?60?%;display:flex}.region-select .region-selected .item[data-v-2fae9870]{max-width:%?140?%;margin-right:%?30?%;text-align:left;line-height:%?60?%;height:100%;color:#333;font-size:%?28?%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.region-select .region-selected .item.disabled[data-v-2fae9870]{color:#999}.region-select .region-selected .item.selected[data-v-2fae9870]{color:#b4282d}.region-select .done[data-v-2fae9870]{float:right;height:%?60?%;width:%?60?%;border:none;background:#fff;line-height:%?60?%;text-align:center;color:#333;font-size:%?28?%}.region-select .done.disabled[data-v-2fae9870]{color:#999}.region-select .bd[data-v-2fae9870]{height:%?492?%;width:100%;padding:0 %?30?%}.region-select .region-list[data-v-2fae9870]{height:auto;overflow:scroll}.region-select .region-list .item[data-v-2fae9870]{width:100%;height:%?104?%;line-height:%?104?%;text-align:left;color:#333;font-size:%?28?%}.region-select .region-list .item.selected[data-v-2fae9870]{color:#b4282d}.bg-mask[data-v-2fae9870]{height:100%;width:100%;background:rgba(0,0,0,.4);position:fixed;top:0;left:0;z-index:8}",""]),e.exports=t},3652:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"a",(function(){}));var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",[i("v-uni-view",{staticClass:"add-address"},[i("v-uni-view",{staticClass:"add-form"},[i("v-uni-view",{staticClass:"form-item"},[i("v-uni-input",{staticClass:"input",attrs:{placeholder:"姓名",value:e.address.name,"auto-focus":!0},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.bindinputName.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"form-item"},[i("v-uni-input",{staticClass:"input",attrs:{value:e.address.mobile,placeholder:"手机号码"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.bindinputMobile.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"form-item"},[i("v-uni-input",{staticClass:"input",attrs:{value:e.address.full_region,disabled:!0,placeholder:"省份、城市、区县"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.chooseRegion.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"form-item"},[i("v-uni-input",{staticClass:"input",attrs:{value:e.address.address,placeholder:"详细地址, 如街道、楼盘号等"},on:{input:function(t){arguments[0]=t=e.$handleEvent(t),e.bindinputAddress.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"form-default"},[i("v-uni-text",{class:"default-input "+(1==e.address.is_default?"selected":""),on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.bindIsDefault.apply(void 0,arguments)}}},[e._v("设为默认地址")])],1)],1),i("v-uni-view",{staticClass:"btns"},[i("v-uni-button",{staticClass:"cannel",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancelAddress.apply(void 0,arguments)}}},[e._v("取消")]),i("v-uni-button",{staticClass:"save",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.saveAddress.apply(void 0,arguments)}}},[e._v("保存")])],1),e.openSelectRegion?i("v-uni-view",{staticClass:"region-select"},[i("v-uni-view",{staticClass:"hd"},[i("v-uni-view",{staticClass:"region-selected"},e._l(e.selectRegionList,(function(t,n){return i("v-uni-view",{key:t.id,class:"item "+(0==t.id?"disabled":"")+" "+(e.regionType-1===n?"selected":""),attrs:{"data-region-type-index":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectRegionType.apply(void 0,arguments)}}},[e._v(e._s(t.name))])})),1),i("v-uni-view",{class:"done "+(e.selectRegionDone?"":"disabled"),on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.doneSelectRegion.apply(void 0,arguments)}}},[e._v("确定")])],1),i("v-uni-view",{staticClass:"bd"},[i("v-uni-view",{staticClass:"region-list"},e._l(e.regionList,(function(t,n){return i("v-uni-view",{key:t.id,class:"item "+(t.selected?"selected":""),attrs:{"data-region-index":n},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.selectRegion.apply(void 0,arguments)}}},[e._v(e._s(t.name))])})),1)],1)],1):e._e()],1),e.openSelectRegion?i("v-uni-view",{staticClass:"bg-mask",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.cancelSelectRegion.apply(void 0,arguments)}}}):e._e()],1)},a=[]},"77d6":function(e,t,i){"use strict";var n=i("9ea5"),a=i.n(n);a.a},"90f1":function(e,t,i){"use strict";i.r(t);var n=i("96f7"),a=i.n(n);for(var d in n)["default"].indexOf(d)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(d);t["default"]=a.a},"96f7":function(e,t,i){"use strict";(function(e){i("7a82"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,i("d3b7"),i("d81d");var n=i("5426"),a=i("66ed"),d=(getApp(),{data:function(){return{address:{id:0,province_id:0,city_id:0,district_id:0,address:"",full_region:"",name:"",mobile:"",is_default:0},addressId:0,openSelectRegion:!1,selectRegionList:[{id:0,name:"省份",parent_id:1,type:1},{id:0,name:"城市",parent_id:1,type:2},{id:0,name:"区县",parent_id:1,type:3}],regionType:1,regionList:[],selectRegionDone:!1}},onLoad:function(t){e("log",t," at pages/shopping/addressAdd/addressAdd.vue:104"),t.id&&(this.setData({addressId:t.id}),this.getAddressDetail()),this.getRegionList(1)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},methods:{bindinputMobile:function(e){var t=this.address;t.mobile=e.detail.value,this.setData({address:t})},bindinputName:function(e){var t=this.address;t.name=e.detail.value,this.setData({address:t})},bindinputAddress:function(e){var t=this.address;t.address=e.detail.value,this.setData({address:t})},bindIsDefault:function(){var e=this.address;e.is_default=!e.is_default,this.setData({address:e})},getAddressDetail:function(){var e=this;n.request(a.AddressDetail,{id:e.addressId}).then((function(t){0===t.errno&&e.setData({address:t.data})}))},setRegionDoneStatus:function(){var e=this.selectRegionList.every((function(e){return 0!=e.id}));this.setData({selectRegionDone:e})},chooseRegion:function(){this.setData({openSelectRegion:!this.openSelectRegion});var e=this.address;if(e.province_id>0&&e.city_id>0&&e.district_id>0){var t=this.selectRegionList;t[0].id=e.province_id,t[0].name=e.province_name,t[0].parent_id=1,t[1].id=e.city_id,t[1].name=e.city_name,t[1].parent_id=e.province_id,t[2].id=e.district_id,t[2].name=e.district_name,t[2].parent_id=e.city_id,this.setData({selectRegionList:t,regionType:3}),this.getRegionList(e.city_id)}else this.setData({selectRegionList:[{id:0,name:"省份",parent_id:1,type:1},{id:0,name:"城市",parent_id:1,type:2},{id:0,name:"区县",parent_id:1,type:3}],regionType:1}),this.getRegionList(1);this.setRegionDoneStatus()},selectRegionType:function(e){var t=e.target.dataset.regionTypeIndex,i=this.selectRegionList;if(t+1==this.regionType||t-1>=0&&i[t-1].id<=0)return!1;this.setData({regionType:t+1});var n=i[t];this.getRegionList(n.parent_id),this.setRegionDoneStatus()},selectRegion:function(e){var t=this,i=e.target.dataset.regionIndex,n=this.regionList[i],a=n.type,d=this.selectRegionList;d[a-1]=n,3!=a?(this.setData({selectRegionList:d,regionType:a+1}),this.getRegionList(n.id)):this.setData({selectRegionList:d}),d.map((function(e,t){return t>a-1&&(e.id=0,e.name=1==t?"城市":"区县",e.parent_id=0),e})),this.setData({selectRegionList:d}),t.setData({regionList:t.regionList.map((function(e){return t.regionType==e.type&&t.selectRegionList[t.regionType-1].id==e.id?e.selected=!0:e.selected=!1,e}))}),this.setRegionDoneStatus()},doneSelectRegion:function(){if(!1===this.selectRegionDone)return!1;var e=this.address,t=this.selectRegionList;e.province_id=t[0].id,e.city_id=t[1].id,e.district_id=t[2].id,e.province_name=t[0].name,e.city_name=t[1].name,e.district_name=t[2].name,e.full_region=t.map((function(e){return e.name})).join(""),this.setData({address:e,openSelectRegion:!1})},cancelSelectRegion:function(){this.setData({openSelectRegion:!1,regionType:this.regionDoneStatus?3:1})},getRegionList:function(e){var t=this,i=t.regionType;n.request(a.RegionList,{parentId:e}).then((function(e){0===e.errno&&t.setData({regionList:e.data.map((function(e){return i==e.type&&t.selectRegionList[i-1].id==e.id?e.selected=!0:e.selected=!1,e}))})}))},cancelAddress:function(){uni.reLaunch({url:"/pages/shopping/address/address"})},saveAddress:function(){e("log",this.address," at pages/shopping/addressAdd/addressAdd.vue:368");var t=this.address;if(""==t.name)return n.showErrorToast("请输入姓名"),!1;if(""==t.mobile)return n.showErrorToast("请输入手机号码"),!1;if(0==t.district_id)return n.showErrorToast("请输入省市区"),!1;if(""==t.address)return n.showErrorToast("请输入详细地址"),!1;n.request(a.AddressSave,{id:t.id,name:t.name,mobile:t.mobile,province_id:t.province_id,city_id:t.city_id,district_id:t.district_id,address:t.address,is_default:t.is_default},"POST").then((function(e){0===e.errno&&uni.navigateBack()}))}}});t.default=d}).call(this,i("0de9")["log"])},"9ea5":function(e,t,i){var n=i("0562");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=i("4f06").default;a("91e6b416",n,!0,{sourceMap:!1,shadowMode:!1})},f1b9:function(e,t,i){"use strict";i.r(t);var n=i("3652"),a=i("90f1");for(var d in a)["default"].indexOf(d)<0&&function(e){i.d(t,e,(function(){return a[e]}))}(d);i("77d6");var s=i("f0c5"),o=Object(s["a"])(a["default"],n["b"],n["c"],!1,null,"2fae9870",null,!1,n["a"],void 0);t["default"]=o.exports}}]);
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/search/search"],{166:function(e,t,r){"use strict";(function(e){r(5);a(r(4));var t=a(r(167));function a(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=r,e(t.default)}).call(this,r(1)["createPage"])},167:function(e,t,r){"use strict";r.r(t);var a=r(168),n=r(170);for(var o in n)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r(172);var i,s=r(13),c=Object(s["default"])(n["default"],a["render"],a["staticRenderFns"],!1,null,null,null,!1,a["components"],i);c.options.__file="pages/search/search.vue",t["default"]=c.exports},168:function(e,t,r){"use strict";r.r(t);var a=r(169);r.d(t,"render",(function(){return a["render"]})),r.d(t,"staticRenderFns",(function(){return a["staticRenderFns"]})),r.d(t,"recyclableRender",(function(){return a["recyclableRender"]})),r.d(t,"components",(function(){return a["components"]}))},169:function(e,t,r){"use strict";var a;r.r(t),r.d(t,"render",(function(){return n})),r.d(t,"staticRenderFns",(function(){return i})),r.d(t,"recyclableRender",(function(){return o})),r.d(t,"components",(function(){return a}));var n=function(){var e=this,t=e.$createElement;e._self._c},o=!1,i=[];n._withStripped=!0},170:function(e,t,r){"use strict";r.r(t);var a=r(171),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},171:function(e,t,r){"use strict";(function(e){function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(9),o=r(10),i=(getApp(),{data:function(){var e;return e={keywrod:"",searchStatus:!1,goodsList:[],helpKeyword:[],historyKeyword:[],categoryFilter:!1,currentSortType:"default",currentSortOrder:"",filterCategory:[],defaultKeyword:{keyword:""},hotKeyword:[],page:1,size:20},a(e,"currentSortType","id"),a(e,"currentSortOrder","desc"),a(e,"categoryId",0),a(e,"keyword",""),a(e,"cate",0),a(e,"iindex",0),a(e,"iitem",{id:"",list_pic_url:"",name:"",retail_price:""}),e},onLoad:function(){this.getSearchKeyword()},methods:{closeSearch:function(){e.navigateBack()},clearKeyword:function(){this.setData({keyword:"",searchStatus:!1})},getSearchKeyword:function(){var e=this;n.request(o.SearchIndex).then((function(t){0===t.errno&&e.setData({historyKeyword:t.data.historyKeywordList,defaultKeyword:t.data.defaultKeyword,hotKeyword:t.data.hotKeywordList})}))},inputChange:function(e){this.setData({keyword:e.detail.value,searchStatus:!1}),this.getHelpKeyword()},getHelpKeyword:function(){var e=this;n.request(o.SearchHelper,{keyword:e.keyword}).then((function(t){0===t.errno&&e.setData({helpKeyword:t.data})}))},inputFocus:function(){this.setData({searchStatus:!1,goodsList:[]}),this.keyword&&this.getHelpKeyword()},clearHistory:function(){this.setData({historyKeyword:[]}),n.request(o.SearchClearHistory,{},"POST").then((function(e){console.log("清除成功")}))},getGoodsList:function(){var e=this;n.request(o.GoodsList,{name:e.keyword,page:e.page,size:e.size,sort:e.currentSortType,order:e.currentSortOrder,categoryId:e.categoryId}).then((function(t){0===t.errno&&e.setData({searchStatus:!0,categoryFilter:!1,goodsList:t.data.data,filterCategory:t.data.filterCategory,page:t.data.currentPage,size:t.data.numsPerPage}),e.getSearchKeyword()}))},onKeywordTap:function(e){this.getSearchResult(e.target.dataset.keyword)},getSearchResult:function(e){this.setData({keyword:e,page:1,categoryId:0,goodsList:[]}),this.getGoodsList()},openSortFilter:function(e){var t=e.currentTarget.id;switch(t){case"categoryFilter":this.setData({categoryFilter:!this.categoryFilter,currentSortOrder:"asc"});break;case"priceSort":var r="asc";"asc"==this.currentSortOrder&&(r="desc"),this.setData({currentSortType:"price",currentSortOrder:r,categoryFilter:!1}),this.getGoodsList();break;default:this.setData({currentSortType:"default",currentSortOrder:"desc",categoryFilter:!1}),this.getGoodsList()}},selectCategory:function(e){var t=e.target.dataset.categoryIndex,r=this.filterCategory,a=null;for(var n in r)n==t?(r[n].selected=!0,a=r[n]):r[n].selected=!1;this.setData({filterCategory:r,categoryFilter:!1,categoryId:a.id,page:1,goodsList:[]}),this.getGoodsList()},onKeywordConfirm:function(e){this.getSearchResult(e.detail.value)}}});t.default=i}).call(this,r(1)["default"])},172:function(e,t,r){"use strict";r.r(t);var a=r(173),n=r.n(a);for(var o in a)["default"].indexOf(o)<0&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},173:function(e,t,r){}},[[166,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/search/search.js.map
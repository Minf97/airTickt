(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/ucenter/addressAdd/addressAdd"],{273:function(e,t,i){"use strict";(function(e){i(5);n(i(4));var t=n(i(274));function n(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=i,e(t.default)}).call(this,i(1)["createPage"])},274:function(e,t,i){"use strict";i.r(t);var n=i(275),s=i(277);for(var r in s)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return s[e]}))}(r);i(279);var d,a=i(13),o=Object(a["default"])(s["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],d);o.options.__file="pages/ucenter/addressAdd/addressAdd.vue",t["default"]=o.exports},275:function(e,t,i){"use strict";i.r(t);var n=i(276);i.d(t,"render",(function(){return n["render"]})),i.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),i.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),i.d(t,"components",(function(){return n["components"]}))},276:function(e,t,i){"use strict";var n;i.r(t),i.d(t,"render",(function(){return s})),i.d(t,"staticRenderFns",(function(){return d})),i.d(t,"recyclableRender",(function(){return r})),i.d(t,"components",(function(){return n}));var s=function(){var e=this,t=e.$createElement;e._self._c},r=!1,d=[];s._withStripped=!0},277:function(e,t,i){"use strict";i.r(t);var n=i(278),s=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=s.a},278:function(e,t,i){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=i(9),s=i(10),r=(getApp(),{data:function(){return{address:{id:0,province_id:0,city_id:0,district_id:0,address:"",full_region:"",name:"",mobile:"",is_default:0},addressId:0,openSelectRegion:!1,selectRegionList:[{id:0,name:"省份",parent_id:1,type:1},{id:0,name:"城市",parent_id:1,type:2},{id:0,name:"区县",parent_id:1,type:3}],regionType:1,regionList:[],selectRegionDone:!1}},onLoad:function(e){console.log(e),e.id&&(this.setData({addressId:e.id}),this.getAddressDetail()),this.getRegionList(1)},onReady:function(){},onShow:function(){},onHide:function(){},onUnload:function(){},methods:{bindinputMobile:function(e){var t=this.address;t.mobile=e.detail.value,this.setData({address:t})},bindinputName:function(e){var t=this.address;t.name=e.detail.value,this.setData({address:t})},bindinputAddress:function(e){var t=this.address;t.address=e.detail.value,this.setData({address:t})},bindIsDefault:function(){var e=this.address;e.is_default=!e.is_default,this.setData({address:e})},getAddressDetail:function(){var e=this;n.request(s.AddressDetail,{id:e.addressId}).then((function(t){0===t.errno&&e.setData({address:t.data})}))},setRegionDoneStatus:function(){var e=this,t=e.selectRegionList.every((function(e){return 0!=e.id}));e.setData({selectRegionDone:t})},chooseRegion:function(){this.setData({openSelectRegion:!this.openSelectRegion});var e=this.address;if(e.province_id>0&&e.city_id>0&&e.district_id>0){var t=this.selectRegionList;t[0].id=e.province_id,t[0].name=e.province_name,t[0].parent_id=1,t[1].id=e.city_id,t[1].name=e.city_name,t[1].parent_id=e.province_id,t[2].id=e.district_id,t[2].name=e.district_name,t[2].parent_id=e.city_id,this.setData({selectRegionList:t,regionType:3}),this.getRegionList(e.city_id)}else this.setData({selectRegionList:[{id:0,name:"省份",parent_id:1,type:1},{id:0,name:"城市",parent_id:1,type:2},{id:0,name:"区县",parent_id:1,type:3}],regionType:1}),this.getRegionList(1);this.setRegionDoneStatus()},selectRegionType:function(e){var t=this,i=e.target.dataset.regionTypeIndex,n=t.selectRegionList;if(i+1==this.regionType||i-1>=0&&n[i-1].id<=0)return!1;this.setData({regionType:i+1});var s=n[i];this.getRegionList(s.parent_id),this.setRegionDoneStatus()},selectRegion:function(e){var t=this,i=e.target.dataset.regionIndex,n=this.regionList[i],s=n.type,r=this.selectRegionList;r[s-1]=n,3!=s?(this.setData({selectRegionList:r,regionType:s+1}),this.getRegionList(n.id)):this.setData({selectRegionList:r}),r.map((function(e,t){return t>s-1&&(e.id=0,e.name=1==t?"城市":"区县",e.parent_id=0),e})),this.setData({selectRegionList:r}),t.setData({regionList:t.regionList.map((function(e){return t.regionType==e.type&&t.selectRegionList[t.regionType-1].id==e.id?e.selected=!0:e.selected=!1,e}))}),this.setRegionDoneStatus()},doneSelectRegion:function(){if(!1===this.selectRegionDone)return!1;var e=this.address,t=this.selectRegionList;e.province_id=t[0].id,e.city_id=t[1].id,e.district_id=t[2].id,e.province_name=t[0].name,e.city_name=t[1].name,e.district_name=t[2].name,e.full_region=t.map((function(e){return e.name})).join(""),this.setData({address:e,openSelectRegion:!1})},cancelSelectRegion:function(){this.setData({openSelectRegion:!1,regionType:this.regionDoneStatus?3:1})},getRegionList:function(e){var t=this,i=t.regionType;n.request(s.RegionList,{parentId:e}).then((function(e){0===e.errno&&t.setData({regionList:e.data.map((function(e){return i==e.type&&t.selectRegionList[i-1].id==e.id?e.selected=!0:e.selected=!1,e}))})}))},cancelAddress:function(){e.navigateTo({url:"/pages/ucenter/address/address"})},saveAddress:function(){console.log(this.address);var t=this.address;if(""==t.name)return n.showErrorToast("请输入姓名"),!1;if(""==t.mobile)return n.showErrorToast("请输入手机号码"),!1;if(0==t.district_id)return n.showErrorToast("请输入省市区"),!1;if(""==t.address)return n.showErrorToast("请输入详细地址"),!1;n.request(s.AddressSave,{id:t.id,name:t.name,mobile:t.mobile,province_id:t.province_id,city_id:t.city_id,district_id:t.district_id,address:t.address,is_default:t.is_default},"POST").then((function(t){0===t.errno&&e.navigateTo({url:"/pages/ucenter/address/address"})}))}}});t.default=r}).call(this,i(1)["default"])},279:function(e,t,i){"use strict";i.r(t);var n=i(280),s=i.n(n);for(var r in n)["default"].indexOf(r)<0&&function(e){i.d(t,e,(function(){return n[e]}))}(r);t["default"]=s.a},280:function(e,t,i){}},[[273,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/ucenter/addressAdd/addressAdd.js.map
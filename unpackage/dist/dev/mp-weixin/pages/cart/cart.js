(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/cart/cart"],{207:function(t,e,a){"use strict";(function(t,e){var o=a(4);a(26);o(a(25));var r=o(a(208));t.__webpack_require_UNI_MP_PLUGIN__=a,e(r.default)}).call(this,a(1)["default"],a(2)["createPage"])},208:function(t,e,a){"use strict";a.r(e);var o=a(209),r=a(211);for(var c in r)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return r[t]}))}(c);a(213);var n,d=a(34),s=Object(d["default"])(r["default"],o["render"],o["staticRenderFns"],!1,null,null,null,!1,o["components"],n);s.options.__file="pages/cart/cart.vue",e["default"]=s.exports},209:function(t,e,a){"use strict";a.r(e);var o=a(210);a.d(e,"render",(function(){return o["render"]})),a.d(e,"staticRenderFns",(function(){return o["staticRenderFns"]})),a.d(e,"recyclableRender",(function(){return o["recyclableRender"]})),a.d(e,"components",(function(){return o["components"]}))},210:function(t,e,a){"use strict";var o;a.r(e),a.d(e,"render",(function(){return r})),a.d(e,"staticRenderFns",(function(){return n})),a.d(e,"recyclableRender",(function(){return c})),a.d(e,"components",(function(){return o}));var r=function(){var t=this,e=t.$createElement,a=(t._self._c,t.cartGoods.length),o=t.cartGoods.length;t.$mp.data=Object.assign({},{$root:{g0:a,g1:o}})},c=!1,n=[];r._withStripped=!0},211:function(t,e,a){"use strict";a.r(e);var o=a(212),r=a.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(c);e["default"]=r.a},212:function(t,e,a){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(30),r=a(31),c=(getApp(),{data:function(){return{cartGoods:[],cartTotal:{goodsCount:0,goodsAmount:0,checkedGoodsCount:0,checkedGoodsAmount:0},isEditCart:!1,checkedAllStatus:!0,editCartList:[]}},onLoad:function(t){},onReady:function(){},onShow:function(){this.getCartList()},onHide:function(){},onUnload:function(){},methods:{getCartList:function(){var t=this;o.request(r.CartList).then((function(e){0===e.errno&&(console.log(e.data),t.setData({cartGoods:e.data.cartList,cartTotal:e.data.cartTotal})),t.setData({checkedAllStatus:t.isCheckedAll()})}))},isCheckedAll:function(){return this.cartGoods.every((function(t,e,a){return 1==t.checked}))},checkedItem:function(t){var e=t.target.dataset.itemIndex,a=this;if(this.isEditCart){var c=this.cartGoods.map((function(t,a,o){return a==e&&(t.checked=!t.checked),t}));a.setData({cartGoods:c,checkedAllStatus:a.isCheckedAll(),"cartTotal.checkedGoodsCount":a.getCheckedGoodsCount()})}else o.request(r.CartChecked,{productIds:a.cartGoods[e].product_id,isChecked:a.cartGoods[e].checked?0:1},"POST").then((function(t){0===t.errno&&(console.log(t.data),a.setData({cartGoods:t.data.cartList,cartTotal:t.data.cartTotal})),a.setData({checkedAllStatus:a.isCheckedAll()})}))},getCheckedGoodsCount:function(){var t=0;return this.cartGoods.forEach((function(e){!0===e.checked&&(t+=e.number)})),console.log(t),t},checkedAll:function(){var t=this;if(this.isEditCart){var e=t.isCheckedAll(),a=this.cartGoods.map((function(t){return t.checked=!e,t}));t.setData({cartGoods:a,checkedAllStatus:t.isCheckedAll(),"cartTotal.checkedGoodsCount":t.getCheckedGoodsCount()})}else{var c=this.cartGoods.map((function(t){return t.product_id}));o.request(r.CartChecked,{productIds:c.join(","),isChecked:t.isCheckedAll()?0:1},"POST").then((function(e){0===e.errno&&(console.log(e.data),t.setData({cartGoods:e.data.cartList,cartTotal:e.data.cartTotal})),t.setData({checkedAllStatus:t.isCheckedAll()})}))}},editCart:function(){var t=this;if(this.isEditCart)this.getCartList(),this.setData({isEditCart:!this.isEditCart});else{var e=this.cartGoods.map((function(t){return t.checked=!1,t}));this.setData({editCartList:this.cartGoods,cartGoods:e,isEditCart:!this.isEditCart,checkedAllStatus:t.isCheckedAll(),"cartTotal.checkedGoodsCount":t.getCheckedGoodsCount()})}},updateCart:function(t,e,a,c){var n=this;o.request(r.CartUpdate,{productId:t,goodsId:e,number:a,id:c},"POST").then((function(t){0===t.errno&&console.log(t.data),n.setData({checkedAllStatus:n.isCheckedAll()})}))},cutNumber:function(t){var e=t.target.dataset.itemIndex,a=this.cartGoods[e],o=a.number-1>1?a.number-1:1;a.number=o,this.setData({cartGoods:this.cartGoods}),this.updateCart(a.product_id,a.goods_id,o,a.id)},addNumber:function(t){var e=t.target.dataset.itemIndex,a=this.cartGoods[e],o=a.number+1;a.number=o,this.setData({cartGoods:this.cartGoods}),this.updateCart(a.product_id,a.goods_id,o,a.id)},checkoutOrder:function(){var e=this.cartGoods.filter((function(t,e,a){return 1==t.checked}));if(e.length<=0)return!1;t.navigateTo({url:"../shopping/checkout/checkout"})},deleteCart:function(){var t=this,e=this.cartGoods.filter((function(t,e,a){return 1==t.checked}));if(e.length<=0)return!1;e=e.map((function(t,e,a){if(1==t.checked)return t.product_id})),o.request(r.CartDelete,{productIds:e.join(",")},"POST").then((function(e){if(0===e.errno){console.log(e.data);var a=e.data.cartList.map((function(t){return console.log(t),t.checked=!1,t}));t.setData({cartGoods:a,cartTotal:e.data.cartTotal})}t.setData({checkedAllStatus:t.isCheckedAll()})}))}}});e.default=c}).call(this,a(2)["default"])},213:function(t,e,a){"use strict";a.r(e);var o=a(214),r=a.n(o);for(var c in o)["default"].indexOf(c)<0&&function(t){a.d(e,t,(function(){return o[t]}))}(c);e["default"]=r.a},214:function(t,e,a){}},[[207,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/cart/cart.js.map
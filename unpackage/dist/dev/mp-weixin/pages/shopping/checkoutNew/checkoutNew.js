(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/checkoutNew/checkoutNew"],{274:function(e,t,r){"use strict";(function(e,t){var n=r(4);r(26);n(r(25));var o=n(r(275));e.__webpack_require_UNI_MP_PLUGIN__=r,t(o.default)}).call(this,r(1)["default"],r(2)["createPage"])},275:function(e,t,r){"use strict";r.r(t);var n=r(276),o=r(278);for(var i in o)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return o[e]}))}(i);r(280);var a,c=r(34),d=Object(c["default"])(o["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],a);d.options.__file="pages/shopping/checkoutNew/checkoutNew.vue",t["default"]=d.exports},276:function(e,t,r){"use strict";r.r(t);var n=r(277);r.d(t,"render",(function(){return n["render"]})),r.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),r.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),r.d(t,"components",(function(){return n["components"]}))},277:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"render",(function(){return o})),r.d(t,"staticRenderFns",(function(){return a})),r.d(t,"recyclableRender",(function(){return i})),r.d(t,"components",(function(){return n}));var o=function(){var e=this,t=e.$createElement,r=(e._self._c,1036010==e.category_id?e.__map(e.checkedGoodsList,(function(t,r){var n=e.__get_orig(t),o=e.indexToNumber(r),i=e.indexToNumber(r);return{$orig:n,m0:o,m1:i}})):null);e.$mp.data=Object.assign({},{$root:{l0:r}})},i=!1,a=[];o._withStripped=!0},278:function(e,t,r){"use strict";r.r(t);var n=r(279),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},279:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(30),o=r(31),i=r(56),a=(getApp(),{data:function(){return{checkedGoodsList:[],checkedAddress:{id:0,name:"",is_default:0,mobile:"",full_region:"",address:""},checkedCoupon:[],couponList:[],goodsTotalPrice:0,freightPrice:0,couponPrice:0,orderTotalPrice:0,actualPrice:0,addressId:0,couponId:0,certificationInfo:{name:"",card:""},isValidCertification:!1,choosetime:""}},onLoad:function(t){var r=t.choosetime;try{var n=e.getStorageSync("addressId");n&&this.setData({addressId:n});var o=e.getStorageSync("couponId");o&&this.setData({couponId:o}),console.log(t),this.setData({category_id:Number(t.category_id),choosetime:r})}catch(i){}},onReady:function(){},onShow:function(){e.showLoading({title:"加载中..."}),this.getCheckoutInfo()},onHide:function(){},onUnload:function(){},methods:{onCertiName:function(e){var t=e.detail.value;e.currentTarget.dataset.i;this.certificationInfo.name=t},onCertiCard:function(e){var t=e.detail.value;e.currentTarget.dataset.i;this.certificationInfo.card=t},validCard:function(){var e=this.certificationInfo.card,t=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/;t.test(e)||(this.isValidCertification=!0),t.test(e)&&(this.isValidCertification=!1)},indexToNumber:function(e){switch(e+1){case 1:return"①";case 2:return"②";case 3:return"③";case 4:return"④";case 5:return"⑤";case 6:return"⑥";case 7:return"⑦";case 8:return"⑧";case 9:return"⑨";case 10:return"⑩";default:return e}},getCheckoutInfo:function(){var t=this;n.request(o.CartCheckout,{addressId:t.addressId,couponId:t.couponId}).then((function(r){0===r.errno&&(console.log(r.data),t.setData({checkedGoodsList:r.data.checkedGoodsList,checkedAddress:r.data.checkedAddress,actualPrice:r.data.actualPrice,checkedCoupon:r.data.checkedCoupon,couponList:r.data.couponList,couponPrice:r.data.couponPrice,freightPrice:r.data.freightPrice,goodsTotalPrice:r.data.goodsTotalPrice,orderTotalPrice:r.data.orderTotalPrice})),e.hideLoading()}))},selectAddress:function(){e.navigateTo({url:"/pages/shopping/address/address"})},addAddress:function(){e.navigateTo({url:"/pages/shopping/addressAdd/addressAdd"})},isWx:function(){var e,t,r=(null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase)&&navigator.userAgent.toLowerCase();return!!/micromessenger/.test(r)},submitOrder:function(){var t=this.isValidCertification,r=this.certificationInfo.card;this.certificationInfo["choosetime"]=this.choosetime,console.log(this.choosetime),1!=t&&0!=r.length||1036010!=this.category_id?n.request(o.OrderSubmit,{addressId:this.addressId,couponId:this.couponId,certification:JSON.stringify([this.certificationInfo]),category_id:this.category_id},"POST").then((function(t){if(0===t.errno){var r=t.data.orderInfo.id;i.payOrder(parseInt(r)).then((function(t){e.redirectTo({url:"/pages/payResult/payResult?status=1&orderId="+r})})).catch((function(t){e.redirectTo({url:"/pages/payResult/payResult?status=0&orderId="+r})}))}else n.showErrorToast("下单失败")})):n.showErrorToast("身份证填写不正确噢")}}});t.default=a}).call(this,r(2)["default"])},280:function(e,t,r){"use strict";r.r(t);var n=r(281),o=r.n(n);for(var i in n)["default"].indexOf(i)<0&&function(e){r.d(t,e,(function(){return n[e]}))}(i);t["default"]=o.a},281:function(e,t,r){}},[[274,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/shopping/checkoutNew/checkoutNew.js.map
{"version":3,"sources":["uni-app:///main.js","webpack:////Users/un/Desktop/airttcket-front/pages/buyNew/buyNew.vue?9259","webpack:////Users/un/Desktop/airttcket-front/pages/buyNew/buyNew.vue?b7d5","webpack:////Users/un/Desktop/airttcket-front/pages/buyNew/buyNew.vue?9734","webpack:////Users/un/Desktop/airttcket-front/pages/buyNew/buyNew.vue?e959","uni-app:///pages/buyNew/buyNew.vue","webpack:////Users/un/Desktop/airttcket-front/pages/buyNew/buyNew.vue?568a"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","uniCalendar","fuiCheckboxGroup","fuiCheckbox","fuiDialog","fuiBottomPopup","mpHtml","e","message","indexOf","console","error","render","_vm","this","_h","$createElement","_self","_c","recyclableRender","staticRenderFns","_withStripped","data","isShowDialog","contentDialog","productListNew","guiGeInfo","tempItem","guiGe","ticketInfo","guigeArr","ticketTime","zp","ticketType","price","article_goodsDetail","contactInfo","name","phone","isValidPhone","isValidArr","isValidTax","checkedAddress","id","is_default","mobile","full_region","address","addressId","couponId","invoices","type","tax_number","isNeedCertification","isNeedTicket","openAttr","cartGoods","isShowXY","isJieShow","ticketCount","chooseDate","isYinSi","sexVal","isShowPopup","pickerColumn","goods","newArrayTourism","onLoad","itemId","util","that","cartGoodsCount","onShow","computed","certificationInfo","guiGeArr","filterArr","card","cardImgFront","cardImgBehind","cardImgElectron","totalMoney","methods","curriculumTempItem","product","reLoad","confirm","extraInfo","delNewArrayTourism","onConfirmPicker","event","value","picker","index","onCancelPicker","popSex","dialogClick","dialogClose","showdialog","onYinSi","detail","jia","jian","open","getGoodsInfo","then","res","goods_specification_ids","gallery","attribute","issueList","comment","brand","specificationList","productList","userHasCollect","collectBackImage","getguigeArr","chooseCount","goods_number","retail_price","initTicketArr","idsArr","valArr","obj","shiJian","date","info","ticketArr","item","ticketArr1","isWeekend","handleTime","a","b","result","start","getCheckoutInfo","uni","getGoodsRelated","relatedGoods","getIsValidArr","validCard","validPhone","onName","onPhone","onCertiName","i","currentTarget","dataset","onCertiCard","onAdress","onJieShow","needCertification","needTicket","imageUrl","isDui","showPopup","closePopup","buy","ticket","category_id","addToCart","api","goodsId","number","productId","certification","choosetime","image","title","mask","goodsClear","productDlete","goods_id","submitOrder","pay","url","orderId","catch"],"mappings":"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A,OACAiC,QACA2E,iCACA1F,cACA2F,4BACAC,iCAIAC,cAhNA,WAgNA,WACA,OACA,KAEA,gBACA,uCACA,KACA9F,kBAEA2C,gFACA,SAEAoD,mBACAC,mBAWA,GAVA,UACA,eACAC,oBAGA,6BACAA,uBAKAA,YACAA,aACA,CACA,kDACA,oBACA,qBACA,sBACA,CACAhG,iBACAiG,UACAC,OACAN,6BACAD,4BACA5E,QACAoF,0BAGA,CACAnG,iBACAiG,UACAC,OACAN,4BACAD,4BACA5E,QACAoF,4BAIApG,oBACAiG,YAIA,gBAIAtD,+BAEA,yDAIA,2CACA,KAEAA,gFACA5D,eACA,SACAA,iBACA,sBACA4D,wBAEAA,uBAEA5D,yBAEAgH,mBACAC,mBAeA,GAbA,UACAjH,eAEA,eACAkH,oBAGA,6BACAA,uBAMAA,YACAA,aACA,CAEA,kDACA,oBACA,qBACA,sBACA,CACAhG,iBACAiG,UACAC,OACAN,6BACAD,4BACA5E,QACAoF,0BAGA,CACAnG,iBACAiG,UACAC,OACAN,4BACAD,4BACA5E,QACAoF,4BAIAC,uBACAJ,gBAMA,SAEAtD,mDAEA,2CACA,KAEAA,gFACA5D,eACA,SAsDA,OApDAuH,kBACAP,mBACAC,mBAcA,GAbA,UACAjH,eAEA,eACAkH,oBAGA,6BACAA,uBAMAA,YACAA,aACA,CAEA,kDACA,oBACA,qBACA,sBACA,CACAhG,iBACAiG,UACAC,OACAN,6BACAD,4BACA5E,QACAoF,0BAGA,CACAnG,iBACAiG,UACAC,OACAN,4BACAD,4BACA5E,QACAoF,4BAIAE,oBACAC,uBACAN,YAIA,KAEAlH,gCACAA,wBACA4D,WACA0D,YACAE,gBAGAC,UA/ZA,SA+ZAL,GACA,2BACA,qBAEAM,WAnaA,SAmaAC,EAAAC,GACA,kBACA,cACA,cACA,8CAGA,KACA,YACA,qBACA,cACA,kBACAC,uDACAC,yBAGA,UAIAC,gBAvbA,WAwbA,WACA/H,oCACA2D,0CACArB,sBACAC,sBACAwD,MAAA,YACA,cACA/F,oBACA4D,WAEA5B,wCAWAgG,oBAGAC,2BACA,WACAtE,0CACA1B,UACA8D,MAAA,YACA,aACAnC,WACAsE,oCAKAC,cA5dA,WA6dA,qEAGAC,UAheA,SAgeAjD,GACA,qCAEA,EACA,gKAEA,WACA,gCAEA,WACA,iCAIAkD,WA9eA,WA+eA,6BACA,2DAGAC,OAnfA,SAmfAzI,GACA,IAEAoF,EAEApF,EAHA6F,OACAT,MAGA,yBAEAsD,QA3fA,SA2fA1I,GACA,IAEAoF,EAEApF,EAHA6F,OACAT,MAGA,0BAGAuD,YApgBA,SAogBA3I,GACA,IAEAoF,EAOApF,EARA6F,OACAT,MAIAwD,EAGA5I,EALA6I,cACAC,QACAF,EAKA,kCAEAG,YAlhBA,SAkhBA/I,GACA,IAEAoF,EAOApF,EARA6F,OACAT,MAIAwD,EAGA5I,EALA6I,cACAC,QACAF,EAKA,kCAGAI,SAjiBA,SAiiBAhJ,GACA,IAEAoF,EAEApF,EAHA6F,OACAT,MAGA,0BAGA6D,UA1iBA,SA0iBAjJ,GACA,QAIAA,EAHA6F,OACAT,MAFA,GAEAA,EAFA,KAMA,0BACAjF,6BAoBA+I,kBAtkBA,WAukBA,oDAGAC,WA1kBA,WA2kBA,sCAGAC,SA9kBA,SA8kBAC,GACA,sEAGAC,UAllBA,WAmlBA,kBAGAC,WAtlBA,WAulBA,kBAGAC,IA1lBA,WA0lBA,0HACArB,gBACA9E,EAAA,aACAM,EAAA,kBACAN,WAJA,uBAKAS,kCALA,6BAQAH,kBARA,uBASAG,kCATA,oDAeA,iBAfA,yBAiBA,eAjBA,eAmBA2F,EAAA,CACA1C,0BACA3E,iBACAsH,gCACA9B,qCAvBA,UAyBA,eAzBA,QA2BA,gBA3BA,qDA6BA9D,sCA7BA,6DAoCA6F,UA9nBA,SA8nBAF,GAAA,6HAEA3F,kBACA8F,kBAAA,CACAC,aAEAC,qBAEAC,eAEAL,0BAEA9B,sBACAoC,+BACAC,4BAGA,QACA/D,MAAA,YACA,QAEA,YACAiC,aACA+B,6CACAC,eACAC,aAzBA,8CAgCAC,WA9pBA,WA8pBA,kHACAvG,kBACA8F,qBAAA,GACA,OAHA,8CAQAU,aAtqBA,WAsqBA,6HACAxG,kBACA8F,uBAAA,CACAW,eAEA,QALA,8CAUAC,YAhrBA,WAsrBA1G,kBACA8F,sBAAA,CACAnH,yBACAC,uBAEAgH,mCAEA5H,+BACAC,kCAEA,QACAmE,MAAA,YACA,gBACA,0BACAuE,gCACAvE,MAAA,YACAiC,cACAuC,mDACAC,OAGAC,OAAA,YACAzC,cACAuC,mDACAC,YAIA7G,oCAEA8G,OAAA,YACA9G,uC,0EC3kCA,wHAAstC,eAAG,G","file":"pages/buyNew/buyNew.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/buyNew/buyNew.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buyNew.vue?vue&type=template&id=60f39886&\"\nvar renderjs\nimport script from \"./buyNew.vue?vue&type=script&lang=js&\"\nexport * from \"./buyNew.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buyNew.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/buyNew/buyNew.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buyNew.vue?vue&type=template&id=60f39886&\"","var components\ntry {\n  components = {\n    uniCalendar: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/uni-calendar/components/uni-calendar/uni-calendar\" */ \"@/uni_modules/uni-calendar/components/uni-calendar/uni-calendar.vue\"\n      )\n    },\n    fuiCheckboxGroup: function () {\n      return import(\n        /* webpackChunkName: \"components/firstui/fui-checkbox-group/fui-checkbox-group\" */ \"@/components/firstui/fui-checkbox-group/fui-checkbox-group.vue\"\n      )\n    },\n    fuiCheckbox: function () {\n      return import(\n        /* webpackChunkName: \"components/firstui/fui-checkbox/fui-checkbox\" */ \"@/components/firstui/fui-checkbox/fui-checkbox.vue\"\n      )\n    },\n    fuiDialog: function () {\n      return import(\n        /* webpackChunkName: \"components/firstui/fui-dialog/fui-dialog\" */ \"@/components/firstui/fui-dialog/fui-dialog.vue\"\n      )\n    },\n    fuiBottomPopup: function () {\n      return import(\n        /* webpackChunkName: \"components/firstui/fui-bottom-popup/fui-bottom-popup\" */ \"@/components/firstui/fui-bottom-popup/fui-bottom-popup.vue\"\n      )\n    },\n    mpHtml: function () {\n      return import(\n        /* webpackChunkName: \"uni_modules/mp-html/components/mp-html/mp-html\" */ \"@/uni_modules/mp-html/components/mp-html/mp-html.vue\"\n      )\n    },\n  }\n} catch (e) {\n  if (\n    e.message.indexOf(\"Cannot find module\") !== -1 &&\n    e.message.indexOf(\".vue\") !== -1\n  ) {\n    console.error(e.message)\n    console.error(\"1. 排查组件名称拼写是否正确\")\n    console.error(\n      \"2. 排查组件是否符合 easycom 规范，文档：https://uniapp.dcloud.net.cn/collocation/pages?id=easycom\"\n    )\n    console.error(\n      \"3. 若组件不符合 easycom 规范，需手动引入，并在 components 中注册该组件\"\n    )\n  } else {\n    throw e\n  }\n}\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buyNew.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buyNew.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"container\">\r\n\r\n\t\t\t<!-- 购票推荐 -->\r\n\t\t\t<scroll-view class=\"contentScroll box\" :scroll-x=\"true\">\r\n\r\n\t\t\t\t<view class=\"contentScrollItem\" v-for=\"item in productListNew\" @click=\"curriculumTempItem(item)\">\r\n\t\t\t\t\t<div class=\"contentScrollItemTxt\">{{item.guiGeInfo[0].guiGe}}</div>\r\n\t\t\t\t\t<image src=\"/static/images/buyNew/ticketImg.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</scroll-view>\r\n\r\n\t\t\t<!-- 入园须知 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view class=\"bb\" style=\"padding-top: 20rpx; border-bottom: none; margin-bottom: 20rpx;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<view>入园须知</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"content\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t\t<view class=\"cc\">1.每日营业时间：10：00-18:00,17:30分后停止入场。（如遇特殊情况闭馆则另行通知）</view>\r\n\t\t\t\t\t\t<view class=\"cc\">2.入场方式：凭二维码在道闸处扫码入场，无需换票。</view>\r\n\t\t\t\t\t\t<view class=\"cc\">3.游客参观全程需佩戴口罩，做好个人防护，文明参观。</view>\r\n\t\t\t\t\t\t<view class=\"cc\">4.每日门票数量有限，售完即止。</view>\r\n\t\t\t\t\t\t<view class=\"cc\">5.惠民票一经出售不退不换。</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 标题盒子1 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view class=\"piaobox\">\r\n\t\t\t\t\t<view class=\"contentScrollItem\" style=\"width: 100rpx;height: 100rpx;\">\r\n\t\t\t\t\t\t<div class=\"contentScrollItemTxt1\" style=\"font-size: 16rpx;\">{{tempItem.guiGeInfo[0].guiGe}}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<image src=\"/static/images/buyNew/ticketImg.png\" mode=\"aspectFit\"\r\n\t\t\t\t\t\t\tstyle=\"width: 100rpx;height: 100rpx;\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"textboxp\">\r\n\t\t\t\t\t\t<view class=\"ttp\">{{tempItem.guiGeInfo[0].guiGe}}</view>\r\n\t\t\t\t\t\t<view class=\"tttipp\">{{goods.goods_desc}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"pricep\">￥{{ price || goods.retail_price}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<!-- 购票数量 -->\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1 pppmount\" style=\"margin-bottom: 20px;\">\r\n\t\t\t\t\t\t<view>购票数量：</view>\r\n\t\t\t\t\t\t<view class=\"pd3\">\r\n\t\t\t\t\t\t\t<view class=\"jian\" @click=\"jian\">-</view>\r\n\t\t\t\t\t\t\t<view class=\"count\">{{ticketCount}}</view>\r\n\t\t\t\t\t\t\t<view class=\"jia\" @click=\"jia\">+</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t\t<view class=\"tt1\" style=\"margin-bottom: 20px;flex-direction: column;align-items: flex-start;\">\r\n\t\t\t\t\t\t<view>选择日期：</view>\r\n\t\t\t\t\t\t<uni-calendar ref=\"calendar\" :selected=\"ticketArr\" :insert=\"false\" @confirm=\"confirm\" />\r\n\t\t\t\t\t\t<view class=\"chooseDate\" @click=\"open\">{{chooseDate}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 联系信息 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view style=\"width: 100%; height: 10px;\"></view>\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1 tt1New\">\r\n\t\t\t\t\t\t<view>游客信息</view>\r\n\t\t\t\t\t\t<view class=\"valNew\" style=\"color: #5695cd;\">1个电话号码限购5张门票</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"addTorism\" @click=\"showdialog\" v-if=\"newArrayTourism.phone.length == 0\">\r\n\t\t\t\t\t<image src=\"/static/images/buyNew/jia.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t<view class=\"addTorText\">添加游客</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"addTorismHas\" style=\"margin-bottom: 10rpx;\" v-else>\r\n\t\t\t\t\t<image @click=\"delNewArrayTourism\" src=\"/static/images/buyNew//forbit.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t<view class=\"newArrayTourismLine\">\r\n\t\t\t\t\t\t<div class=\"newArrayTourismName\">{{newArrayTourism.name}}</div>\r\n\t\t\t\t\t\t<div class=\"newArrayTourismPhone\">{{newArrayTourism.phone}}</div>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"userYinSi\">\r\n\t\t\t\t\t<fui-checkbox-group class=\"demo\" name=\"checkbox\" v-model=\"vals\" @change=\"change\">\r\n\t\t\t\t\t\t<view class=\"fui-list__item\">\r\n\t\t\t\t\t\t\t<view class=\"fui-align__center\">\r\n\t\t\t\t\t\t\t\t<fui-checkbox value=\"1\" checked borderRadius=\"5rpx\"></fui-checkbox>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</fui-checkbox-group>\r\n\t\t\t\t\t勾选同意《用户隐私条约》\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<fui-dialog :show=\"isShowDialog\" :content=\"contentDialog\" maskClosable @click=\"dialogClick\"\r\n\t\t\t\t\t@close=\"dialogClose\">\r\n\t\t\t\t\t<template #default>\r\n\t\t\t\t\t\t<view class=\"inp\">\r\n\t\t\t\t\t\t\t<view class=\"tit\">姓名</view>\r\n\t\t\t\t\t\t\t<input type=\"text\" v-show=\"isShowDialog\" :value=\"contactInfo.name\" @input=\"onName\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"请输入姓名\" placeholder-style=\"font-size: 14px;\">\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"inp\" style=\"border-bottom: 30px;\">\r\n\t\t\t\t\t\t\t<view class=\"tit\">电话</view>\r\n\t\t\t\t\t\t\t<input type=\"number\" v-show=\"isShowDialog\" :value=\"contactInfo.phone\" @input=\"onPhone\"\r\n\t\t\t\t\t\t\t\t@blur=\"validPhone\" placeholder=\"联系人手机\" placeholder-style=\"font-size: 14px;\">\r\n\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t<view class=\"er\" v-if=\"isValidPhone\">*电话号码填写错误，请重新填写</view>\r\n\r\n\t\t\t\t\t\t<view class=\"inp\" style=\"border-bottom: 30px;\">\r\n\t\t\t\t\t\t\t<!-- <view class=\"tit\">性别</view>\r\n\t\t\t\t\t\t\t<view class=\"valInp\" @click=\"popSex\">\r\n\t\t\t\t\t\t\t\t<view class=\"valval\">{{sexVal}}</view>\r\n\t\t\t\t\t\t\t\t<image src=\"../../static/static/images/go.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t\t<!-- <van-cell title-style=\"text-align:left;\" style=\"width: 100%;\" title=\"性别\" is-link value=\"请选择性别\" @click=\"popSex\" /> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</template>\r\n\t\t\t\t</fui-dialog>\r\n\t\t\t</view>\r\n\r\n\t\t\t<fui-bottom-popup :show=\"isShowPopup\" @close=\"closePopup\">\r\n\t\t\t\t<!-- <view class=\"fui-custom__wrap\">\r\n\t\t\t\t\t\r\n\t\t\t\t</view> -->\r\n\t\t\t\t<!-- \t\t<van-picker :columns=\"pickerColumn\" @confirm=\"onConfirmPicker\" @cancel=\"onCancelPicker\"\r\n\t\t\t\t\t:show-toolbar=\"true\"></van-picker> -->\r\n\t\t\t</fui-bottom-popup>\r\n\r\n\t\t\t<!-- 入园须知 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view class=\"bb\" style=\"padding-top: 20rpx; border-bottom: none; margin-bottom: 20rpx;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<view>入园须知</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"content\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t\t<view class=\"cc gg\">1、身高1米（含）以下的儿童免票（需测量身高）。</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">2、现役军人、军队离退休干部、本市户籍退役军人、烈属、残疾人凭本人有效证件免票。</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">3、在职、退休、残疾消防救援人员和消防救援院校学员凭本人有效证件免票。</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">4、民政部门确认的最低生活保障对象、特困人员和本市户籍的享受抚恤补助的优抚对象凭有效证件免票。</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 退改说明 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view class=\"bb\" style=\"padding-top: 20rpx; border-bottom: none; margin-bottom: 20rpx;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<view>退改说明</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"content\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t\t<view class=\"cc gg\">1、游客不可再现修改入园人信息</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">2、退票规则</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">\r\n\t\t\t\t\t\t\t<image src=\"/static/images/buyNew/1.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\"> (1).使用日期前1天的15时00分（含）之前申请取消，可免费取消。</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\"> (2).使用日期前1天的15时00分（含）之后无法申请退票，可在使用日期当天18:00（含）之前申请免费改期。</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">3、改期规则：</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\">\r\n\t\t\t\t\t\t\t<image src=\"/static/images/buyNew/2.png\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cc gg\"> (1).使用日期当天的18时00分（含）之前申请改期，可免费改期。</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<view class=\"detail\" style=\"background-color: #fff;\">\r\n\t\t\t\t<!-- <template is=\"wxParse\" :data=\"wxParseData:goodsDetail.nodes\"/> -->\r\n\t\t\t\t<mp-html :content=\"article_goodsDetail\"></mp-html>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- fix框 -->\r\n\t\t\t<view class=\"fffix\" style=\"z-index: 10;\">\r\n\t\t\t\t<view class=\"mon\">总额 <view class=\"monVal\">￥{{totalMoney}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ffright\">\r\n\t\t\t\t\t<view class=\"mx\">明细</view>\r\n\t\t\t\t\t<view class=\"ljyd\" @click=\"buy\">立即支付</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// import fuiBottomPopup from \"@/components/firstui/fui-bottom-popup/fui-bottom-popup.vue\"\r\n\t// import customAddress from \"@/components/custom-address.vue\"\r\n\timport util from \"../../utils/util.js\"\r\n\timport api from \"../../config/api.js\"\r\n\timport pay from \"../../services/pay.js\"\r\n\t// 上传\r\n\timport upload from './uploadImg.js'\r\n\r\n\timport fuiDialog from \"@/components/firstui/fui-dialog/fui-dialog.vue\"\r\n\timport fuiBottomPopup from \"@/components/firstui/fui-bottom-popup/fui-bottom-popup.vue\"\r\n\timport fuiCheckboxGroup from \"@/components/firstui/fui-checkbox-group/fui-checkbox-group.vue\"\r\n\timport fuiCheckbox from \"@/components/firstui/fui-checkbox/fui-checkbox.vue\"\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tfuiBottomPopup,\r\n\t\t\tfuiDialog,\r\n\t\t\tfuiCheckboxGroup,\r\n\t\t\tfuiCheckbox\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// options: ['最新车讯', '降价排行', 'SUV', '违章罚单', '提车试驾', '测评体验', '选车指南', '美女车模', '加油优惠卡', '维修保养'],\r\n\t\t\t\t// tag: '请选择',\r\n\t\t\t\t// tagShow: false,\r\n\t\t\t\tisShowDialog: false,\r\n\t\t\t\tcontentDialog: '',\r\n\t\t\t\tproductListNew: [{\r\n\t\t\t\t\tguiGeInfo: [{\t\tguiGe: ''}],\r\n\t\t\t\t}],\r\n\t\t\t\ttempItem: {\r\n\t\t\t\t\tguiGeInfo: [{\r\n\t\t\t\t\t\tguiGe: '',\r\n\t\t\t\t\t}]\r\n\t\t\t\t},\r\n\t\t\t\t// 要购买的票信息\r\n\t\t\t\tticketInfo: {\r\n\t\t\t\t\t// 成人票/儿童票等等\r\n\t\t\t\t\tguigeArr: [],\r\n\t\t\t\t\t// 时间 YY-MM-DD\r\n\t\t\t\t\tticketTime: \"\",\r\n\t\t\t\t\t// 专业票/公众日\r\n\t\t\t\t\tzp: \"\",\r\n\t\t\t\t\t// 实物票/电子票\r\n\t\t\t\t\tticketType: \"\"\r\n\t\t\t\t},\r\n\t\t\t\tprice: '',\r\n\t\t\t\tarticle_goodsDetail: '',\r\n\t\t\t\t// 联系信息\r\n\t\t\t\tcontactInfo: {\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t},\r\n\t\t\t\tisValidPhone: false,\r\n\r\n\t\t\t\tisValidArr: [],\r\n\t\t\t\tisValidTax: false,\r\n\r\n\t\t\t\t// 邮寄地址\r\n\t\t\t\tcheckedAddress: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tis_default: 0,\r\n\t\t\t\t\tmobile: '',\r\n\t\t\t\t\tfull_region: '',\r\n\t\t\t\t\taddress: ''\r\n\t\t\t\t},\r\n\t\t\t\taddressId: 0,\r\n\t\t\t\tcouponId: 0,\r\n\r\n\t\t\t\t// 发票\r\n\t\t\t\tinvoices: {\r\n\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\ttax_number: \"\"\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// \r\n\t\t\t\tisNeedCertification: 0,\r\n\t\t\t\tisNeedTicket: false,\r\n\t\t\t\t// 组件标志位\r\n\t\t\t\topenAttr: false,\r\n\t\t\t\t// 购物车列表\r\n\t\t\t\tcartGoods: [],\r\n\r\n\t\t\t\t// 是否展示弹窗\r\n\t\t\t\tisShowXY: false,\r\n\t\t\t\t// 是否接受协议\r\n\t\t\t\tisJieShow: false,\r\n\r\n\t\t\t\tticketCount: 1,\r\n\t\t\t\tchooseDate: '请选择日期',\r\n\t\t\t\tisYinSi: true,\r\n\r\n\t\t\t\tsexVal: \"请选择性别\",\r\n\t\t\t\tisShowPopup: false,\r\n\t\t\t\tpickerColumn: ['男', '女'],\r\n\t\t\t\tgoods: {},\r\n\t\t\t\tnewArrayTourism: {\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\tphone: \"\"\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\r\n\t\t\tthis.setData({\r\n\t\t\t\tid: parseInt(options.id), // id: 1181000,\r\n\t\t\t\titemId: options?.itemId,\r\n\t\t\t});\r\n\r\n\t\t\tvar that = this;\r\n\t\t\tthis.getGoodsInfo();\r\n\t\t\tutil.request(api.CartGoodsCount).then(function(res) {\r\n\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\tcartGoodsCount: res.data.cartTotal.goodsCount\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\r\n\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\tvar addressId = uni.getStorageSync('addressId');\r\n\t\t\tif (addressId) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\taddressId: addressId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar couponId = uni.getStorageSync('couponId');\r\n\t\t\tif (couponId) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tcouponId: couponId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.getCheckoutInfo();\r\n\t\t},\r\n\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\t// 证件信息\r\n\t\t\tcertificationInfo() {\r\n\t\t\t\tconst guiGeArr = this.ticketInfo.guigeArr;\r\n\t\t\t\tconst filterArr = [];\r\n\r\n\t\t\t\tguiGeArr.forEach(item => {\r\n\r\n\t\t\t\t\tif (item.chooseCount > 0 && item.goods_number > 0) {\r\n\t\t\t\t\t\tfor (let i = item.chooseCount; i > 0; i--) {\r\n\t\t\t\t\t\t\tfilterArr.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// return item.chooseCount > 0 && item.goods_number > 0\r\n\t\t\t\t})\r\n\r\n\r\n\t\t\t\treturn filterArr.map(item => {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tticketTime: item.ticketTime,\r\n\t\t\t\t\t\tguiGe: item.guiGe,\r\n\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\tcard: \"\",\r\n\t\t\t\t\t\tcardImgFront: \"\",\r\n\t\t\t\t\t\tcardImgBehind: \"\",\r\n\t\t\t\t\t\tcardImgElectron: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 总额\r\n\t\t\ttotalMoney() {\r\n\t\t\t\treturn this.goods.retail_price * this.ticketCount;\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tcurriculumTempItem(product) {\r\n\t\t\t\tconst id = this.id;\r\n\t\t\t\tthis.reLoad(id, product.id)\r\n\t\t\t},\r\n\t\t\treLoad(id, itemId) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\titemId: itemId,\r\n\t\t\t\t});\r\n\t\t\t\tthis.chooseDate = \"请选择日期\";\r\n\t\t\t\tthis.ticketCount = 1;\r\n\r\n\t\t\t\tvar that = this;\r\n\t\t\t\tthis.getGoodsInfo();\r\n\t\t\t\tutil.request(api.CartGoodsCount).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tcartGoodsCount: res.data.cartTotal.goodsCount\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tconfirm(e) {\r\n\t\t\t\tconsole.log(e);\r\n\t\t\t\tconst {\r\n\t\t\t\t\textraInfo\r\n\t\t\t\t} = e;\r\n\t\t\t\tif (!extraInfo?.guiGe) {\r\n\t\t\t\t\tutil.showErrorToast('该日没有售票');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.goods.name = extraInfo.guiGe;\r\n\t\t\t\tthis.goods.retail_price = extraInfo.retail_price;\r\n\t\t\t\tthis.chooseDate = extraInfo.date;\r\n\t\t\t},\r\n\t\t\tdelNewArrayTourism() {\r\n\t\t\t\tthis.newArrayTourism.name = \"\";\r\n\t\t\t\tthis.newArrayTourism.phone = \"\";\r\n\t\t\t},\r\n\t\t\tonConfirmPicker(event) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tpicker,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tindex\r\n\t\t\t\t} = event.detail;\r\n\t\t\t\tthis.sexVal = value;\r\n\t\t\t\tthis.isShowPopup = false;\r\n\t\t\t},\r\n\t\t\tonCancelPicker(event) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tpicker,\r\n\t\t\t\t\tvalue,\r\n\t\t\t\t\tindex\r\n\t\t\t\t} = event.detail;\r\n\t\t\t\tthis.isShowPopup = false;\r\n\t\t\t},\r\n\t\t\tpopSex() {\r\n\t\t\t\tthis.isShowPopup = !this.isShowPopup;\r\n\t\t\t\tconsole.log(this.isShowPopup);\r\n\t\t\t},\r\n\t\t\tdialogClick(e) {\r\n\t\t\t\tif (e.index == 0) {\r\n\t\t\t\t\t// 初始化\r\n\t\t\t\t\tthis.isShowDialog = false;\r\n\t\t\t\t\tthis.sexVal = '请选择性别';\r\n\t\t\t\t\tthis.contactInfo.name = \"\";\r\n\t\t\t\t\tthis.contactInfo.phone = \"\";\r\n\t\t\t\t\tthis.isValidPhone = false;\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// 判空\r\n\t\t\t\t// if (\r\n\t\t\t\t// \tthis.isValidPhone ||\r\n\t\t\t\t// \tthis.sexVal == '请选择性别'\r\n\t\t\t\t// ) {\r\n\t\t\t\t// \tutil.showErrorToast('没填写完噢');\r\n\t\t\t\t// \treturn;\r\n\t\t\t\t// }\r\n\t\t\t\t// push进去\r\n\t\t\t\tthis.newArrayTourism = {\r\n\t\t\t\t\tname: this.contactInfo.name,\r\n\t\t\t\t\tphone: this.contactInfo.phone\r\n\t\t\t\t}\r\n\t\t\t\t// 初始化\r\n\t\t\t\tthis.isShowDialog = false;\r\n\t\t\t\tthis.sexVal = '请选择性别';\r\n\t\t\t\tthis.contactInfo.name = \"\";\r\n\t\t\t\tthis.contactInfo.phone = \"\";\r\n\t\t\t},\r\n\t\t\tdialogClose() {\r\n\t\t\t\tthis.isShowDialog = false;\r\n\t\t\t},\r\n\t\t\tshowdialog() {\r\n\t\t\t\tthis.isShowDialog = true;\r\n\t\t\t},\r\n\t\t\tonYinSi(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue: [value]\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e.detail)\r\n\t\t\t\tthis.isYinSi = value == \"false\" ? true : false;\r\n\t\t\t\tconsole.log(this.isYinSi)\r\n\t\t\t},\r\n\t\t\tjia() {\r\n\t\t\t\tif (this.ticketCount < 5) {\r\n\t\t\t\t\tthis.ticketCount++;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tutil.showErrorToast('限购五张门票哦')\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tjian() {\r\n\t\t\t\tif (this.ticketCount > 1) {\r\n\t\t\t\t\tthis.ticketCount--;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\topen() {\r\n\t\t\t\tconsole.log(this.$refs.calendar);\r\n\t\t\t\tthis.$refs.calendar.open();\r\n\t\t\t},\r\n\t\t\tgetGoodsInfo: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tutil.request(api.GoodsDetail, {\r\n\t\t\t\t\tid: that.id\r\n\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tthat.article_goodsDetail = that.escape2Html(res.data.info.goods_desc);\r\n\r\n\t\t\t\t\t\tres.data.info.goods_desc = res.data.info.goods_desc.match(/<p>(.*?)<\\/p>/)[1];\r\n\t\t\t\t\t\tres.data.productList = res.data.productList.filter(item => item\r\n\t\t\t\t\t\t\t.goods_specification_ids)\r\n\r\n\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\tgoods: res.data.info,\r\n\t\t\t\t\t\t\tgallery: res.data.gallery,\r\n\t\t\t\t\t\t\tattribute: res.data.attribute,\r\n\t\t\t\t\t\t\tissueList: res.data.issue,\r\n\t\t\t\t\t\t\tcomment: res.data.comment,\r\n\t\t\t\t\t\t\tbrand: res.data.brand,\r\n\t\t\t\t\t\t\tspecificationList: res.data.specificationList,\r\n\t\t\t\t\t\t\tproductList: res.data.productList,\r\n\t\t\t\t\t\t\tuserHasCollect: res.data.userHasCollect,\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tvar tempItem = {};\r\n\t\t\t\t\t\t// 如果有itemid，就去productlist里找\r\n\t\t\t\t\t\tif (that?.itemId) {\r\n\t\t\t\t\t\t\ttempItem = res.data.productList.filter(item => {\r\n\t\t\t\t\t\t\t\treturn item.id == that?.itemId\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tif (tempItem.length > 0) tempItem = tempItem[0]\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\ttempItem = that.productList[0]\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlet productListNew = res.data.productList\r\n\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t// guigeArr: that.getguigeArr(),\r\n\t\t\t\t\t\t\ttempItem: tempItem,\r\n\t\t\t\t\t\t\tproductListNew: productListNew\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tconsole.log(tempItem, \"slkdjfnkjlsdnvkj\");\r\n\t\t\t\t\t\tthat.initTicketArr();\r\n\r\n\t\t\t\t\t\tif (res.data.userHasCollect == 1) {\r\n\t\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t\tcollectBackImage: that.hasCollectImage\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t\tcollectBackImage: that.noCollectImage\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t//WxParse.wxParse('goodsDetail', 'html', res.data.info.goods_desc, that)\r\n\r\n\t\t\t\t\t\tthat.getGoodsRelated();\r\n\r\n\r\n\t\t\t\t\t\tconsole.log(tempItem, \"slkdjfnkjlsdnvkj\");\r\n\t\t\t\t\t\tconsole.log(that.guigeArr, that.gallery, 23333)\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 计算得到规格数组\r\n\t\t\tgetguigeArr() {\r\n\t\t\t\tconst ticketArr = this.ticketArr;\r\n\t\t\t\tconst ticketTypeArr = this.ticketTypeArr;\r\n\t\t\t\tconst ticketTypeIndex = this.ticketTypeIndex;\r\n\t\t\t\tconst chooseDate = this.chooseDate;\r\n\r\n\t\t\t\tlet arr = ticketArr.filter(item => {\r\n\t\t\t\t\tconsole.log(item.date, chooseDate);\r\n\t\t\t\t\treturn item.pz == ticketTypeArr[ticketTypeIndex] && item.date == chooseDate\r\n\t\t\t\t})\r\n\t\t\t\treturn arr = arr.map(item => {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\tchooseCount: item.goods_number > 0 ? 1 : 0,\r\n\t\t\t\t\t\tguiGe: item.guiGe,\r\n\t\t\t\t\t\tgoods_number: item.goods_number,\r\n\t\t\t\t\t\tretail_price: item.retail_price\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tinitTicketArr() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet ticketArr = [];\r\n\r\n\t\t\t\tlet tempItem = this.tempItem;\r\n\t\t\t\tlet idsArr = tempItem.goods_specification_ids.split(\"_\");\r\n\t\t\t\tlet valArr = [];\r\n\t\t\t\ttempItem[\"guiGeInfo\"] = []\r\n\r\n\t\t\t\tthat.specificationList.map(sf => valArr = [...valArr, ...sf.valueList]);\r\n\t\t\t\tlet obj = {};\r\n\t\t\t\t// 对数组遍历寻找到对应的数据\r\n\t\t\t\tidsArr.map(ids => {\r\n\t\t\t\t\tvalArr.map(val => {\r\n\t\t\t\t\t\tif (ids == val.id) {\r\n\t\t\t\t\t\t\tif (val.name == \"规格\") {\r\n\t\t\t\t\t\t\t\tobj[\"guiGe\"] = val.value;\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\tif (val.name == \"日期\" || val.name == \"时间\") {\r\n\t\t\t\t\t\t\t\tobj[\"shiJian\"] = val.value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tobj[\"guiGe\"] &&\r\n\t\t\t\t\t\t\tobj[\"shiJian\"]\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tconst [day1, day2] = obj.shiJian.split(\"&\");\r\n\t\t\t\t\t\t\tconst timearr = this.handleTime(day1, day2);\r\n\t\t\t\t\t\t\tconst tmpArr = timearr.map(e => {\r\n\t\t\t\t\t\t\t\tif (this.isWeekend(e)) {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\tguiGe: obj[\"guiGe\"],\r\n\t\t\t\t\t\t\t\t\t\tshiJian: e,\r\n\t\t\t\t\t\t\t\t\t\tdate: e,\r\n\t\t\t\t\t\t\t\t\t\tretail_price: tempItem.weekend_price,\r\n\t\t\t\t\t\t\t\t\t\tgoods_number: tempItem.goods_number,\r\n\t\t\t\t\t\t\t\t\t\tid: tempItem.id,\r\n\t\t\t\t\t\t\t\t\t\tinfo: (\"￥\" + tempItem.weekend_price)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\tguiGe: obj[\"guiGe\"],\r\n\t\t\t\t\t\t\t\t\t\tshiJian: e,\r\n\t\t\t\t\t\t\t\t\t\tdate: e,\r\n\t\t\t\t\t\t\t\t\t\tretail_price: tempItem.retail_price,\r\n\t\t\t\t\t\t\t\t\t\tgoods_number: tempItem.goods_number,\r\n\t\t\t\t\t\t\t\t\t\tid: tempItem.id,\r\n\t\t\t\t\t\t\t\t\t\tinfo: (\"￥\" + tempItem.retail_price)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\ttempItem[\"guiGeInfo\"] = [...tmpArr];\r\n\t\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t\tthis.tempItem = tempItem;\r\n\r\n\r\n\r\n\t\t\t\tthat.productList.map(item => {\r\n\t\t\t\t\t// 将 goods_specification_ids 变成数组\r\n\t\t\t\t\tif (item.goods_specification_ids == null || item.id != that.tempItem.id) {\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tlet idsArr = item.goods_specification_ids.split(\"_\");\r\n\t\t\t\t\tlet valArr = [];\r\n\r\n\t\t\t\t\tthat.specificationList.map(sf => valArr = [...valArr, ...sf.valueList]);\r\n\t\t\t\t\tconsole.log(valArr)\r\n\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\tconsole.log(233)\r\n\t\t\t\t\tif (this.isWeekend(new Date())) {\r\n\t\t\t\t\t\tthat.price = item.weekend_price\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.price = item.retail_price\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log(that.price, 233)\r\n\t\t\t\t\t// 对数组遍历寻找到对应的数据\r\n\t\t\t\t\tidsArr.map(ids => {\r\n\t\t\t\t\t\tvalArr.map(val => {\r\n\r\n\t\t\t\t\t\t\tif (ids == val.id) {\r\n\t\t\t\t\t\t\t\tconsole.log(val)\r\n\r\n\t\t\t\t\t\t\t\tif (val.name == \"规格\") {\r\n\t\t\t\t\t\t\t\t\tobj[\"guiGe\"] = val.value;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (val.name == \"日期\" || val.name == \"时间\") {\r\n\t\t\t\t\t\t\t\t\tobj[\"shiJian\"] = val.value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tobj[\"guiGe\"] &&\r\n\t\t\t\t\t\t\t\tobj[\"shiJian\"]\r\n\t\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\t\tconst [day1, day2] = obj.shiJian.split(\"&\");\r\n\t\t\t\t\t\t\t\tconst timearr = this.handleTime(day1, day2);\r\n\t\t\t\t\t\t\t\tconst tmpArr = timearr.map(e => {\r\n\t\t\t\t\t\t\t\t\tif (this.isWeekend(e)) {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tguiGe: obj[\"guiGe\"],\r\n\t\t\t\t\t\t\t\t\t\t\tshiJian: e,\r\n\t\t\t\t\t\t\t\t\t\t\tdate: e,\r\n\t\t\t\t\t\t\t\t\t\t\tretail_price: item.weekend_price,\r\n\t\t\t\t\t\t\t\t\t\t\tgoods_number: item.goods_number,\r\n\t\t\t\t\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\t\t\t\t\tinfo: (\"￥\" + item.weekend_price)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tguiGe: obj[\"guiGe\"],\r\n\t\t\t\t\t\t\t\t\t\t\tshiJian: e,\r\n\t\t\t\t\t\t\t\t\t\t\tdate: e,\r\n\t\t\t\t\t\t\t\t\t\t\tretail_price: item.retail_price,\r\n\t\t\t\t\t\t\t\t\t\t\tgoods_number: item.goods_number,\r\n\t\t\t\t\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\t\t\t\t\tinfo: (\"￥\" + item.retail_price)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\tticketArr = [...ticketArr, ...tmpArr];\r\n\t\t\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\r\n\t\t\t\tlet ticketArr1 = [];\r\n\t\t\t\t// console.log(that.productListNew)\r\n\t\t\t\tthat.productListNew = that.productListNew.map(item => {\r\n\r\n\t\t\t\t\tlet idsArr = item.goods_specification_ids.split(\"_\");\r\n\t\t\t\t\tlet valArr = [];\r\n\r\n\t\t\t\t\tthat.specificationList.map(sf => valArr = [...valArr, ...sf.valueList]);\r\n\t\t\t\t\tconsole.log(valArr)\r\n\t\t\t\t\tlet obj = {};\r\n\t\t\t\t\t// 对数组遍历寻找到对应的数据\r\n\t\t\t\t\titem[\"guiGeInfo\"] = []\r\n\t\t\t\t\tidsArr.map(ids => {\r\n\t\t\t\t\t\tvalArr.map(val => {\r\n\t\t\t\t\t\t\tif (ids == val.id) {\r\n\t\t\t\t\t\t\t\tconsole.log(val)\r\n\r\n\t\t\t\t\t\t\t\tif (val.name == \"规格\") {\r\n\t\t\t\t\t\t\t\t\tobj[\"guiGe\"] = val.value;\r\n\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\tif (val.name == \"日期\" || val.name == \"时间\") {\r\n\t\t\t\t\t\t\t\t\tobj[\"shiJian\"] = val.value;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tobj[\"guiGe\"] &&\r\n\t\t\t\t\t\t\t\tobj[\"shiJian\"]\r\n\t\t\t\t\t\t\t) {\r\n\r\n\t\t\t\t\t\t\t\tconst [day1, day2] = obj.shiJian.split(\"&\");\r\n\t\t\t\t\t\t\t\tconst timearr1 = this.handleTime(day1, day2);\r\n\t\t\t\t\t\t\t\tconst tmpArr1 = timearr1.map(e => {\r\n\t\t\t\t\t\t\t\t\tif (this.isWeekend(e)) {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tguiGe: obj[\"guiGe\"],\r\n\t\t\t\t\t\t\t\t\t\t\tshiJian: e,\r\n\t\t\t\t\t\t\t\t\t\t\tdate: e,\r\n\t\t\t\t\t\t\t\t\t\t\tretail_price: item.weekend_price,\r\n\t\t\t\t\t\t\t\t\t\t\tgoods_number: item.goods_number,\r\n\t\t\t\t\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\t\t\t\t\tinfo: (\"￥\" + item.weekend_price)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\tguiGe: obj[\"guiGe\"],\r\n\t\t\t\t\t\t\t\t\t\t\tshiJian: e,\r\n\t\t\t\t\t\t\t\t\t\t\tdate: e,\r\n\t\t\t\t\t\t\t\t\t\t\tretail_price: item.retail_price,\r\n\t\t\t\t\t\t\t\t\t\t\tgoods_number: item.goods_number,\r\n\t\t\t\t\t\t\t\t\t\t\tid: item.id,\r\n\t\t\t\t\t\t\t\t\t\t\tinfo: (\"￥\" + item.retail_price)\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\titem[\"guiGeInfo\"] = [...tmpArr1];\r\n\t\t\t\t\t\t\t\tticketArr1 = [...ticketArr1, ...tmpArr1];\r\n\t\t\t\t\t\t\t\tobj = {};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t})\r\n\t\t\t\t\treturn item\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(that.productListNew, 2)\r\n\t\t\t\tconsole.log(ticketArr, \"清洗出来的票\")\r\n\t\t\t\tthat.setData({\r\n\t\t\t\t\tticketArr,\r\n\t\t\t\t\tticketArr1\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tisWeekend(date) {\r\n\t\t\t\tconst dayOfWeek = new Date(date).getDay();\r\n\t\t\t\treturn dayOfWeek === 6 || dayOfWeek === 0;\r\n\t\t\t},\r\n\t\t\thandleTime(a, b) {\r\n\t\t\t\tlet start = new Date(a);\r\n\t\t\t\tlet end = new Date(b);\r\n\t\t\t\tconst handle = (n) => {\r\n\t\t\t\t\treturn n.toString().length > 1 ? n : `0${n}`\r\n\t\t\t\t}\r\n\r\n\t\t\t\tlet result = [];\r\n\t\t\t\twhile (start <= end) {\r\n\t\t\t\t\tlet month = start.getMonth() + 1;\r\n\t\t\t\t\tlet date = start.getDate();\r\n\t\t\t\t\tlet year = start.getFullYear();\r\n\t\t\t\t\tresult.push(`${year}-${handle(month)}-${handle(date)}`);\r\n\t\t\t\t\tstart.setDate(start.getDate() + 1);\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn result\r\n\t\t\t\t// console.log(result);\r\n\r\n\t\t\t},\r\n\t\t\tgetCheckoutInfo() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(that.addressId, that.couponId);\r\n\t\t\t\tutil.request(api.CartCheckout, {\r\n\t\t\t\t\taddressId: that.addressId,\r\n\t\t\t\t\tcouponId: that.couponId\r\n\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t// checkedGoodsList: res.data.checkedGoodsList,\r\n\t\t\t\t\t\t\tcheckedAddress: res.data.checkedAddress,\r\n\t\t\t\t\t\t\t// actualPrice: res.data.actualPrice,\r\n\t\t\t\t\t\t\t// checkedCoupon: res.data.checkedCoupon,\r\n\t\t\t\t\t\t\t// couponList: res.data.couponList,\r\n\t\t\t\t\t\t\t// couponPrice: res.data.couponPrice,\r\n\t\t\t\t\t\t\t// freightPrice: res.data.freightPrice,\r\n\t\t\t\t\t\t\t// goodsTotalPrice: res.data.goodsTotalPrice,\r\n\t\t\t\t\t\t\t// orderTotalPrice: res.data.orderTotalPrice\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetGoodsRelated: function() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tutil.request(api.GoodsRelated, {\r\n\t\t\t\t\tid: that.id\r\n\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\trelatedGoods: res.data.goodsList\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetIsValidArr() {\r\n\t\t\t\tthis.isValidArr = this.certificationInfo.map(item => item = false);\r\n\t\t\t},\r\n\t\t\t// 校验身份证\r\n\t\t\tvalidCard(index) {\r\n\t\t\t\tconst card = this.certificationInfo[index].card;\r\n\r\n\t\t\t\tconst id =\r\n\t\t\t\t\t/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/;\r\n\r\n\t\t\t\tif (!id.test(card)) {\r\n\t\t\t\t\tthis.$set(this.isValidArr, index, true)\r\n\t\t\t\t}\r\n\t\t\t\tif (id.test(card)) {\r\n\t\t\t\t\tthis.$set(this.isValidArr, index, false)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tvalidPhone() {\r\n\t\t\t\tconst phone = this.contactInfo.phone\r\n\t\t\t\tthis.isValidPhone = !/^1[3|4|5|6|7|8|9][0-9]\\d{8}$/.test(phone)\r\n\t\t\t},\r\n\t\t\t// 联系信息\r\n\t\t\tonName(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.contactInfo.name = value;\r\n\t\t\t},\r\n\t\t\tonPhone(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.contactInfo.phone = value;\r\n\t\t\t},\r\n\t\t\t// 证件信息\r\n\t\t\tonCertiName(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcurrentTarget: {\r\n\t\t\t\t\t\tdataset: {\r\n\t\t\t\t\t\t\ti\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e)\r\n\t\t\t\tthis.certificationInfo[i].name = value;\r\n\t\t\t},\r\n\t\t\tonCertiCard(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcurrentTarget: {\r\n\t\t\t\t\t\tdataset: {\r\n\t\t\t\t\t\t\ti\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e);\r\n\t\t\t\tthis.certificationInfo[i].card = value;\r\n\t\t\t},\r\n\t\t\t// 邮寄地址\r\n\t\t\tonAdress(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.adressInfo.adress = value;\r\n\t\t\t},\r\n\r\n\t\t\tonJieShow(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue: [value]\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e.detail)\r\n\t\t\t\tthis.isJieShow = value == \"false\" ? true : false;\r\n\t\t\t\tconsole.log(this.isJieShow)\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\t// tagTap() {\r\n\t\t\t// \tthis.$refs.ddmTag.show()\r\n\t\t\t// \tthis.tagShow = true;\r\n\t\t\t// },\r\n\t\t\t// tagItemClick(e) {\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t// \tthis.tag = e.text\r\n\t\t\t// \tthis.tagClose()\r\n\t\t\t// },\r\n\t\t\t// tagClose() {\r\n\t\t\t// \tthis.tagShow = false;\r\n\t\t\t// },\r\n\r\n\r\n\t\t\t// 是否稍后填写证件\r\n\t\t\tneedCertification() {\r\n\t\t\t\tthis.isNeedCertification = !this.isNeedCertification;\r\n\t\t\t},\r\n\t\t\t// 是否需要发票\r\n\t\t\tneedTicket() {\r\n\t\t\t\tthis.isNeedTicket = !this.isNeedTicket;\r\n\t\t\t},\r\n\r\n\t\t\timageUrl(isDui) {\r\n\t\t\t\treturn isDui ? '/static/images/buy/dui-2.png' : '/static/images/buy/dui.png'\r\n\t\t\t},\r\n\r\n\t\t\tshowPopup() {\r\n\t\t\t\tthis.isShowXY = true\r\n\t\t\t},\r\n\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.isShowXY = false\r\n\t\t\t},\r\n\r\n\t\t\tasync buy() {\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\tconst chooseDate = this.chooseDate;\r\n\t\t\t\tconst newArrayTourism = this.newArrayTourism;\r\n\t\t\t\tif (chooseDate == '请选择日期') {\r\n\t\t\t\t\tutil.showErrorToast('请选择日期');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tif (newArrayTourism.phone.length == 0) {\r\n\t\t\t\t\tutil.showErrorToast('请添加游客');\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// return;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 删除购物车中的票类商品\r\n\t\t\t\t\tawait this.productDlete();\r\n\t\t\t\t\t// 购物车置空\r\n\t\t\t\t\tawait this.goodsClear();\r\n\t\t\t\t\t// 加入购物车\r\n\t\t\t\t\tlet ticket = {\r\n\t\t\t\t\t\tchooseCount: this.ticketCount,\r\n\t\t\t\t\t\tid: this.tempItem.id,\r\n\t\t\t\t\t\tcategory_id: this.goods.category_id,\r\n\t\t\t\t\t\tisWeekend: this.isWeekend(this.chooseDate)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tawait this.addToCart(ticket);\r\n\t\t\t\t\t// 调起支付\r\n\t\t\t\t\tthis.submitOrder();\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tutil.showErrorToast(err.errMsg)\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\r\n\r\n\t\t\t// 加入购物车\r\n\t\t\tasync addToCart(ticket) {\r\n\r\n\t\t\t\tawait util.request(\r\n\t\t\t\t\tapi.CartAdd, {\r\n\t\t\t\t\t\tgoodsId: this.id,\r\n\t\t\t\t\t\t// 该票的张数\r\n\t\t\t\t\t\tnumber: ticket.chooseCount,\r\n\t\t\t\t\t\t// 该票的id\r\n\t\t\t\t\t\tproductId: ticket.id,\r\n\t\t\t\t\t\t// category_id??\r\n\t\t\t\t\t\tcategory_id: ticket.category_id,\r\n\t\t\t\t\t\t// 是否周末  true: false\r\n\t\t\t\t\t\tisWeekend: ticket.isWeekend,\r\n\t\t\t\t\t\tcertification: JSON.stringify([{\r\n\t\t\t\t\t\t\tchoosetime: this.chooseDate\r\n\t\t\t\t\t\t}])\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t).then(res => {\r\n\t\t\t\t\tlet _res = res;\r\n\r\n\t\t\t\t\tif (_res.errno == 0) {} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\timage: '/static/static/images/icon_error.png',\r\n\t\t\t\t\t\t\ttitle: _res.errmsg,\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 购物车置空\r\n\t\t\tasync goodsClear() {\r\n\t\t\t\tawait util.request(\r\n\t\t\t\t\tapi.goodsClear, {},\r\n\t\t\t\t\t'GET'\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\t// 删除购物车中的票类商品\r\n\t\t\tasync productDlete() {\r\n\t\t\t\tawait util.request(\r\n\t\t\t\t\tapi.productDlete, {\r\n\t\t\t\t\t\tgoods_id: this.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\t// 调起支付\r\n\t\t\tsubmitOrder() {\r\n\t\t\t\t// if (this.addressId <= 0) {\r\n\t\t\t\t// \tutil.showErrorToast('请选择收货地址');\r\n\t\t\t\t// \treturn false;\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tutil.request(\r\n\t\t\t\t\tapi.OrderSubmit, {\r\n\t\t\t\t\t\taddressId: this.addressId,\r\n\t\t\t\t\t\tcouponId: this.couponId,\r\n\t\t\t\t\t\t// category_id??\r\n\t\t\t\t\t\tcategory_id: this.goods.category_id,\r\n\t\t\t\t\t\t// 联系信息\r\n\t\t\t\t\t\tname: this.newArrayTourism.name,\r\n\t\t\t\t\t\tphone: this.newArrayTourism.phone,\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t).then((res) => {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tconst orderId = res.data.orderInfo.id;\r\n\t\t\t\t\t\tpay.payOrder(parseInt(orderId))\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/payResult/payResult?status=1&orderId=' +\r\n\t\t\t\t\t\t\t\t\t\torderId\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((res) => {\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/payResult/payResult?status=0&orderId=' +\r\n\t\t\t\t\t\t\t\t\t\torderId\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tutil.showErrorToast('下单失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tutil.showErrorToast('下单失败');\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(\"./buyNew.css\");\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buyNew.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buyNew.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}
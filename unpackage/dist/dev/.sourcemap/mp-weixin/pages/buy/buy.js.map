{"version":3,"sources":["uni-app:///main.js","webpack:////Users/un/Desktop/airttcket-front/pages/buy/buy.vue?60a2","webpack:////Users/un/Desktop/airttcket-front/pages/buy/buy.vue?3d13","webpack:////Users/un/Desktop/airttcket-front/pages/buy/buy.vue?a0cb","webpack:////Users/un/Desktop/airttcket-front/pages/buy/buy.vue?d623","uni-app:///pages/buy/buy.vue","webpack:////Users/un/Desktop/airttcket-front/pages/buy/buy.vue?29fd"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","l0","_self","_c","__map","certificationInfo","item","index","$orig","__get_orig","m0","indexToNumber","m1","m2","imageUrl","isNeedTicket","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","ticketInfo","guigeArr","ticketTime","zp","ticketType","contactInfo","name","phone","isValidPhone","isValidArr","isValidTax","checkedAddress","id","is_default","mobile","full_region","address","addressId","couponId","invoices","type","tax_number","isNeedCertification","openAttr","cartGoods","isShowXY","isJieShow","onLoad","category_id","console","onShow","computed","guiGeArr","filterArr","guiGe","card","cardImgFront","cardImgBehind","cardImgElectron","totalMoney","money","methods","onCardImgElectron","uni","count","sizeType","sourceType","success","title","mask","util","uptoken","url","filePath","method","formData","backUrl","strToObj","fail","icon","previewCardImgElectron","current","urls","previewCardImgFront","onCardImgFront","api","previewCardImgBehind","onCardImgBehind","onTypeInvoices","e","value","detail","onNameInvoices","onTaxInvoices","validTax_Invoices","getCheckoutInfo","then","that","selectAddress","addAddress","getIsValidArr","validCard","validPhone","onName","onPhone","onCertiName","i","currentTarget","dataset","onCertiCard","onAdress","onJieShow","needCertification","needTicket","isDui","showPopup","closePopup","buy","isWeekend","date","isCheckedAllSpec","image","addToCart","ticket","goodsId","number","productId","certification","goodsClear","productDlete","goods_id","submitOrder","isNoNeedAddress","pay","orderId","catch"],"mappings":"2HAAA,KAGA,YACA,Y,mDAFAA,GAAGC,kCAAoCC,EAGvCC,EAAWC,a,gECLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,oBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,MAAMP,EAAIQ,mBAAmB,SAAUC,EAAMC,GACxD,IAAIC,EAAQX,EAAIY,WAAWH,GAEvBI,EAAKb,EAAIc,cAAcJ,GACvBK,EAAKf,EAAIc,cAAcJ,GAC3B,MAAO,CACLC,MAAOA,EACPE,GAAIA,EACJE,GAAIA,OAIJC,EAAKhB,EAAIiB,SAASjB,EAAIkB,cAC1BlB,EAAImB,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLnB,GAAIA,EACJY,GAAIA,MAKRQ,GAAmB,EACnBC,EAAkB,GACtB1B,EAAO2B,eAAgB,G,iCC9BvB,yHAAg2B,eAAG,G,gHC6Pn2B,cACA,WACA,WAEA,U,uwPAIA,CACA5B,cAIAsB,KALA,WAMA,OAMAO,YAEAC,YAEAC,cAEAC,MAEAC,eAIAC,aACAC,QACAC,UAEAC,gBAEAC,cACAC,cAGAC,gBACAC,KACAN,QACAO,aACAC,UACAC,eACAC,YAEAC,YACAC,WAGAC,UACAC,QACAd,QACAe,eAIAC,sBACA/B,gBAEAgC,YAEAC,aAGAC,YAEAC,eAGAC,OAlEA,SAkEA1D,GACA,IACA2C,EAEA3C,EAFA2C,GACAgB,EACA3D,EADA2D,YAGA,8BACA,8BACA,qBACA,cACAhB,KACAgB,gBAEAC,kBA6BAC,OA5GA,WA6GA,oCACA,GACA,cACAb,cAIA,mCACA,GACA,cACAC,aAGA,wBAIAa,UAGAlD,kBAHA,WAIA,+BACA,KAaA,OAXAmD,uBAEA,qCACA,gCACAC,aAOA,mBAEA,OACA/B,wBACAgC,cACA5B,QACA6B,QACAC,gBACAC,iBACAC,wBAKAC,WAhCA,WAiCA,QAKA,OAJA,8CAEAC,mCAEA,IAGAC,SACAtD,cADA,SACAJ,GACA,YACA,OACA,UAEA,OACA,UAEA,OACA,UAEA,OACA,UAEA,OACA,UAEA,OACA,UAEA,OACA,UAEA,OACA,UAEA,OACA,UAEA,QACA,UAEA,QACA,WAIA2D,kBAtCA,SAsCA3D,GACA,gCACA4D,eACAC,QACAC,mCACAC,8BACAC,oBACA,sBACAjE,oBACA6D,eACAK,gBACAC,UAIA,SACAC,2FAEAC,YAEA,yBAEA,uBACAR,cACAS,+BACAC,WACA/C,YACAgD,cACAC,UACA,MACA,SAEAR,oBAGA,yBACAS,EACA,uCACAC,MACA5B,eAEAc,iBAEAe,iBACAf,aACAK,aACAW,cAEA9B,eAEAc,0BASAiB,uBAjGA,SAiGA7E,GACA,gCACA4D,gBACAkB,UACAC,uBACAf,oBACAlB,gBAEA6B,iBACA7B,mBAKAkC,oBA/GA,SA+GAhF,GACA,gCACA4D,gBACAkB,UACAC,oBACAf,oBACAlB,gBAEA6B,iBACA7B,mBAIAmC,eA5HA,SA4HAjF,GACA,gCACA4D,eACAC,QACAC,mCACAC,8BACAC,oBACA,sBACAjE,iBACA6D,eACAK,gBACAC,UAIA,SACAC,yDAEAC,YAEA,yBAEA,uBACAR,cACAS,0BACAC,WACA/C,YACAgD,cACAC,UACA,MACA,SAEAR,oBAGA,yBACAS,EACAS,0BACAR,MACA5B,eAEAc,iBAEAe,iBACAf,aACAK,aACAW,cAEA9B,eAEAc,0BAQAuB,qBAtLA,SAsLAnF,GACA,gCACA4D,gBACAmB,wBAGAK,gBA5LA,SA4LApF,GACA,gCACA4D,eACAC,QACAC,mCACAC,8BACAC,oBACA,sBACAjE,kBACA6D,eACAK,gBACAC,UAIA,SACAC,yDAEAC,YAEA,yBAEA,uBACAR,cACAS,0BACAC,WACA/C,YACAgD,cACAC,UACA,MACA,SAEAR,oBAGA,yBACAS,EACAS,0BACAR,MACA5B,eACAA,6BAEAc,iBAEAe,iBACAf,aACAK,aACAW,cAEA9B,eAEAc,0BAUAyB,eAzPA,SAyPAC,GACA,IAEAC,EAEAD,EAHAE,OACAD,MAGA,sBAEAE,eAjQA,SAiQAH,GACA,IAEAC,EAEAD,EAHAE,OACAD,MAGA,sBAEAG,cAzQA,SAyQAJ,GACA,IAEAC,EAEAD,EAHAE,OACAD,MAGA,4BAEAI,kBAjRA,WAkRA,+BACA,wCAEAC,gBArRA,WAsRA,WACA9C,oCACAqB,0CACAjC,sBACAC,sBACA0D,MAAA,YACA,cACA/C,oBACAgD,WAEAlE,wCAWAgC,oBAGAmC,cA9SA,WA+SAnC,cACAS,yCAGA2B,WAnTA,WAoTApC,cACAS,+CAGA4B,cAxTA,WAyTA,qEAGAC,UA5TA,SA4TAlG,GACA,qCAEA,EACA,gKAEA,WACA,gCAEA,WACA,iCAIAmG,WA1UA,WA2UA,6BACA,2DAGAC,OA/UA,SA+UAd,GACA,IAEAC,EAEAD,EAHAE,OACAD,MAGA,yBAEAc,QAvVA,SAuVAf,GACA,IAEAC,EAEAD,EAHAE,OACAD,MAGA,0BAGAe,YAhWA,SAgWAhB,GACA,IAEAC,EAOAD,EARAE,OACAD,MAIAgB,EAGAjB,EALAkB,cACAC,QACAF,EAKA,kCAEAG,YA9WA,SA8WApB,GACA,IAEAC,EAOAD,EARAE,OACAD,MAIAgB,EAGAjB,EALAkB,cACAC,QACAF,EAKA,kCAGAI,SA7XA,SA6XArB,GACA,IAEAC,EAEAD,EAHAE,OACAD,MAGA,0BAGAqB,UAtYA,SAsYAtB,GACA,QAIAA,EAHAE,OACAD,MAFA,GAEAA,EAFA,KAMA,0BACAzC,6BAoBA+D,kBAlaA,WAmaA,oDAGAC,WAtaA,WAuaA,sCAGAvG,SA1aA,SA0aAwG,GACA,sEAGAC,UA9aA,WA+aA,kBAGAC,WAlbA,WAmbA,kBAGAC,IAtbA,WAsbA,0HACAtD,gBAEA,qBAHA,0EASA,iBATA,uBAWA,eAXA,OAaA1C,EAAA,sBACAiG,EAAA,qCACAjG,gDACAqF,EAAA,EAhBA,aAgBAA,YAhBA,kCAiBA,sBAjBA,QAgBAA,IAhBA,wBAoBA,gBApBA,qDAsBApC,sCAtBA,6DA0BAgD,UAhdA,SAgdAC,GACA,2BACA,qBAIAC,iBAtdA,WAudA,wBACA,kBACA,2DACA,mEACA,oEACA,sEACA,yBACA,iBACA,kBAGA,OACA5F,OACAC,kBACA0B,sDACA5B,aAGAP,cAEAoC,sDACAC,sDACAC,uDAIAK,aACA0D,6CACArD,cACAC,WAEA,IAGApB,eAEA,OACAc,aACA0D,6CACArD,cACAC,WAEA,KAMAqD,UAvgBA,SAugBAC,EAAAxH,EAAAmH,GAAA,oHAEA,6DACArE,oCAHA,SAIAqB,kBACAe,kBAAA,CACAuC,aAEAC,qBAEAC,eAEA9E,0BACA+E,uDACAT,aAEA,QACAtB,MAAA,YACA,QAEA,YACAjC,aACA0D,6CACArD,eACAC,aAxBA,8CA+BA2D,WAtiBA,WAsiBA,kHACA1D,kBACAe,qBAAA,GACA,OAHA,8CAQA4C,aA9iBA,WA8iBA,6HACA3D,kBACAe,uBAAA,CACA6C,eAEA,QALA,8CAUAC,YAxjBA,WA8jBA7D,kBACAe,sBAAA,CACAhD,yBACAC,uBAEAU,6BAEAoF,kDAEA1G,2BACAC,6BAIAhB,+BAEA4B,wCAEA,QACAyD,MAAA,YACA,gBACA,0BACAqC,gCACArC,MAAA,YACAjC,cACAS,mDACA8D,OAGAC,OAAA,YACAxE,cACAS,mDACA8D,YAIAhE,oCAEAiE,OAAA,YACAjE,uC,2ECjhCA,yHAAmtC,eAAG,G","file":"pages/buy/buy.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/buy/buy.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./buy.vue?vue&type=template&id=63838ed8&\"\nvar renderjs\nimport script from \"./buy.vue?vue&type=script&lang=js&\"\nexport * from \"./buy.vue?vue&type=script&lang=js&\"\nimport style0 from \"./buy.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/buy/buy.vue\"\nexport default component.exports","export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=template&id=63838ed8&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var l0 = _vm.__map(_vm.certificationInfo, function (item, index) {\n    var $orig = _vm.__get_orig(item)\n\n    var m0 = _vm.indexToNumber(index)\n    var m1 = _vm.indexToNumber(index)\n    return {\n      $orig: $orig,\n      m0: m0,\n      m1: m1,\n    }\n  })\n\n  var m2 = _vm.imageUrl(_vm.isNeedTicket)\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        l0: l0,\n        m2: m2,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"container\">\r\n\t\t\t<!-- 标题盒子1 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view class=\"tt\">2022珠海航展 - {{ticketInfo.zp}}门票</view>\r\n\t\t\t\t<view class=\"bb\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/aixin.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t<view>温馨提示</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"content\">\r\n\t\t\t\t\t\t<view class=\"cc\">1.入场方式：实物票凭“门票+有效证件”入场.</view>\r\n\t\t\t\t\t\t<view class=\"cc\">2.有效证件：指“身份证、户口簿、通行证、护照”</view>\r\n\t\t\t\t\t\t<view class=\"cc\">3.友情提示：专业日门票一经预定，不支持退改.</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 出行日期 -->\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/riqi_o.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t<view>出行日期：</view>\r\n\t\t\t\t\t\t<view class=\"val\">{{ticketInfo.ticketTime.shiJian}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 票种信息 -->\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/piaoju.png\"></image>\r\n\t\t\t\t\t\t<view>票种信息：</view>\r\n\t\t\t\t\t\t<view class=\"val\">{{ticketInfo.ticketType}}</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 购票数量 -->\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\" style=\"margin-bottom: 20px;\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/shujukanban.png\" mode=\"\"></image>\r\n\t\t\t\t\t\t<view>购票数量：</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"amount\" v-for=\"(item,index) in ticketInfo.guigeArr\"\r\n\t\t\t\t\t\tv-if=\"item.chooseCount != 0 && item.goods_number != 0\">\r\n\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t<view class=\"square\"></view>\r\n\t\t\t\t\t\t\t<view class=\"vvvv\">{{item.guiGe}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"right\">￥{{item.retail_price}} *{{item.chooseCount}}张</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 联系信息 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view style=\"width: 100%; height: 10px;\"></view>\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/yonghu.png\"></image>\r\n\t\t\t\t\t\t<view>联系信息</view>\r\n\t\t\t\t\t\t<view class=\"val\" style=\"color: #5695cd;\">请仔细填写并核对手机号</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"inp\">\r\n\t\t\t\t\t<view class=\"tit\">姓名</view>\r\n\t\t\t\t\t<input type=\"text\" :value=\"contactInfo.name\" @input=\"onName\" placeholder=\"请输入姓名\"\r\n\t\t\t\t\t\tplaceholder-style=\"font-size: 13px;\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"inp\" style=\"border-bottom: 30px;\">\r\n\t\t\t\t\t<view class=\"tit\">电话</view>\r\n\t\t\t\t\t<input type=\"number\" :value=\"contactInfo.phone\" @input=\"onPhone\" @blur=\"validPhone\"\r\n\t\t\t\t\t\tplaceholder=\"联系人手机\" placeholder-style=\"font-size: 13px;\">\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"er\" v-if=\"isValidPhone\">*电话号码填写错误，请重新填写</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 证件信息 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view style=\"width: 100%; height: 10px;\"></view>\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/shenfenzheng.png\"></image>\r\n\t\t\t\t\t\t<view>证件信息</view>\r\n\t\t\t\t\t\t<!-- <view class=\"val\" style=\"color: #ccc;\">\r\n\t\t\t\t\t\t\t暂不填写-稍后提供\r\n\t\t\t\t\t\t\t<image :src=\"imageUrl(isNeedCertification)\" mode=\"aspectFill\" @click=\"needCertification\"\r\n\t\t\t\t\t\t\t\tstyle=\"margin-left: 5px;\"></image>\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"inpBox\" v-for=\"(item, index) in certificationInfo\">\r\n\t\t\t\t\t<view class=\"inp\">\r\n\t\t\t\t\t\t<view class=\"tit\">{{indexToNumber(index)}}证件姓名</view>\r\n\t\t\t\t\t\t<input type=\"text\" :value=\"item.name\" @input=\"onCertiName\" :data-i=\"index\"\r\n\t\t\t\t\t\t\t:placeholder=\"'证件姓名【' + item.guiGe + '】'\" placeholder-style=\"font-size: 13px;\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"inp\" style=\"border-bottom: 1px solid #ddd; margin-bottom: 10px\">\r\n\t\t\t\t\t\t<view class=\"tit\">{{indexToNumber(index)}}身份证</view>\r\n\t\t\t\t\t\t<input type=\"text\" :value=\"item.card\" @input=\"onCertiCard\" @blur=\"validCard(index)\"\r\n\t\t\t\t\t\t\t:data-i=\"index\" :placeholder=\"'证件号码【' + item.guiGe + '】'\"\r\n\t\t\t\t\t\t\tplaceholder-style=\"font-size: 13px;\">\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"er\" v-if=\"isValidArr[index]\">*证件号码填写错误，请重新填写</view>\r\n\r\n\t\t\t\t\t<view class=\"inp zyr\" v-if=\"ticketInfo.zp == '专业日'\">\r\n\t\t\t\t\t\t<view class=\"tit\">身份证照片(上传正反面)</view>\r\n\t\t\t\t\t\t<view class=\"imgBoxbox\">\r\n\t\t\t\t\t\t\t<view class=\"imgBox\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.cardImgFront\" v-if=\"item.cardImgFront\" mode=\"aspectFill\" class=\"sfz\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 50px; height: 50px;\" @click=\"previewCardImgFront(index)\"></image>\r\n\t\t\t\t\t\t\t\t<image src=\"/static/images/buy/jia.png\" v-else @click=\"onCardImgFront(index)\"\r\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" class=\"sfz\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"imgBox\">\r\n\t\t\t\t\t\t\t\t<image :src=\"item.cardImgBehind\" v-if=\"item.cardImgBehind\" mode=\"aspectFill\" class=\"sfz\"\r\n\t\t\t\t\t\t\t\t\tstyle=\"width: 50px; height: 50px;\" @click=\"previewCardImgBehind(index)\"></image>\r\n\t\t\t\t\t\t\t\t<image src=\"/static/images/buy/jia.png\" v-else @click=\"onCardImgBehind(index)\"\r\n\t\t\t\t\t\t\t\t\tmode=\"aspectFill\" class=\"sfz\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"inp zyr\" v-if=\"ticketInfo.zp == '专业日'\"\r\n\t\t\t\t\t\tstyle=\"border-bottom: 1px solid #ddd; margin-bottom: 10px\">\r\n\t\t\t\t\t\t<view class=\"tit\">电子证件照</view>\r\n\t\t\t\t\t\t<view class=\"imgBox\">\r\n\t\t\t\t\t\t\t<image :src=\"item.cardImgElectron\" v-if=\"item.cardImgElectron\" mode=\"aspectFill\" class=\"sfz\"\r\n\t\t\t\t\t\t\t\tstyle=\"width: 50px; height: 50px;\" @click=\"previewCardImgElectron(index)\"></image>\r\n\t\t\t\t\t\t\t<image src=\"/static/images/buy/jia.png\" v-else @click=\"onCardImgElectron(index)\"\r\n\t\t\t\t\t\t\t\tmode=\"aspectFill\" class=\"sfz\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\r\n\t\t\t<!-- 邮寄地址 -->\r\n\t\t\t<view class=\"box\" v-if=\"ticketInfo.ticketType == '实物票'\">\r\n\t\t\t\t<view style=\"width: 100%; height: 10px;\"></view>\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/youjiziliao.png\"></image>\r\n\t\t\t\t\t\t<view>邮寄地址</view>\r\n\t\t\t\t\t\t<view class=\"val\" style=\"color: #5695cd;\">[全国顺丰包邮]</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<!-- 地址选择 -->\r\n\t\t\t\t<view class=\"address-box\">\r\n\t\t\t\t\t<view class=\"address-item\" @tap=\"selectAddress\" v-if=\"checkedAddress.id > 0\">\r\n\t\t\t\t\t\t<view class=\"l\">\r\n\t\t\t\t\t\t\t<text class=\"name\">{{ checkedAddress.name }}</text>\r\n\t\t\t\t\t\t\t<text class=\"default\" v-if=\"checkedAddress.is_default === 1\">默认</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"m\">\r\n\t\t\t\t\t\t\t<text class=\"mobile\">{{ checkedAddress.mobile }}</text>\r\n\t\t\t\t\t\t\t<text class=\"address\">{{ checkedAddress.full_region + checkedAddress.address }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"r\">\r\n\t\t\t\t\t\t\t<!-- <image src=\"/static/static/images/address_right.png\"></image> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"address-item address-empty\" @tap=\"addAddress\" v-if=\"!checkedAddress.id > 0\">\r\n\t\t\t\t\t\t<view class=\"m\">还没有收货地址，去添加</view>\r\n\t\t\t\t\t\t<view class=\"r\">\r\n\t\t\t\t\t\t\t<image src=\"/static/static/images/address_right.png\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 需要发票 -->\r\n\t\t\t<view class=\"box\">\r\n\t\t\t\t<view style=\"width: 100%; height: 10px;\"></view>\r\n\t\t\t\t<view class=\"bb\" style=\"border-bottom: none;\">\r\n\t\t\t\t\t<view class=\"tt1\">\r\n\t\t\t\t\t\t<image src=\"../../static/images/buy/fapiao.png\"></image>\r\n\t\t\t\t\t\t<view>需要发票</view>\r\n\t\t\t\t\t\t<view class=\"val\" style=\"color: #5695cd;\">\r\n\t\t\t\t\t\t\t<image :src=\"imageUrl(isNeedTicket)\" mode=\"aspectFill\" @click=\"needTicket\"></image>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view style=\"width: 100%; display: flex; flex-direction: column; align-items:center;\"\r\n\t\t\t\t\tv-if=\"isNeedTicket\">\r\n\t\t\t\t\t<view class=\"inp\">\r\n\t\t\t\t\t\t<view class=\"tit\">抬头类型</view>\r\n\t\t\t\t\t\t<input type=\"text\" :value=\"invoices.type\" @input=\"onTypeInvoices\" placeholder=\"请输入抬头类型\"\r\n\t\t\t\t\t\t\tplaceholder-style=\"font-size: 13px;\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"inp\" style=\"border-bottom: 30px; border-bottom: 1px dotted #ddd;\">\r\n\t\t\t\t\t\t<view class=\"tit\">抬头名称</view>\r\n\t\t\t\t\t\t<input type=\"text\" :value=\"invoices.name\" @input=\"onNameInvoices\" placeholder=\"请输入抬头名称\"\r\n\t\t\t\t\t\t\tplaceholder-style=\"font-size: 13px;\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"inp\" style=\"border-bottom: 30px;\">\r\n\t\t\t\t\t\t<view class=\"tit\">抬头税号</view>\r\n\t\t\t\t\t\t<input type=\"text\" :value=\"invoices.tax_number\" @input=\"onTaxInvoices\" @blur=\"validTax_Invoices\"\r\n\t\t\t\t\t\t\tplaceholder=\"请输入抬头税号\" placeholder-style=\"font-size: 13px;\">\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\r\n\t\t\t\t<view class=\"er\" v-if=\"isValidTax\">*抬头税号填写错误，请重新填写</view>\r\n\r\n\t\t\t\t<view class=\"nnnn\">\r\n\t\t\t\t\t提供航展专用发票，成功购票后到'订单中心'申请发票！\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\r\n\t\t\t<!-- 协议 -->\r\n\t\t\t<view class=\"xy\">\r\n\t\t\t\t<checkbox-group @change=\"onJieShow\">\r\n\t\t\t\t\t<checkbox :value=\"isJieShow\" />\r\n\t\t\t\t</checkbox-group>\r\n\t\t\t\t<view class=\"mmmm\">已阅读并接受 <view class=\"asA\" @click=\"showPopup\">“珠海票务网”中国航展门票委托订票协议</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- fix框 -->\r\n\t\t\t<view class=\"fffix\" style=\"z-index: 10;\">\r\n\t\t\t\t<view class=\"mon\">总额: <view class=\"monVal\">￥{{totalMoney}}</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"ffright\">\r\n\t\t\t\t\t<view class=\"mx\">明细</view>\r\n\r\n\t\t\t\t\t<view style=\"position: relative;\">\r\n\t\t\t\t\t\t<button type=\"default\" open-type=\"contact\" class=\"contactBtn\"></button>\r\n\t\t\t\t\t\t<image src=\"/static/images/buy/kefu.png\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"ljyd\" @click=\"buy\">立即预订</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\t\t\t<!-- 协议弹出层 -->\r\n\t\t\t<!-- <fui-Bottom-Popup :show=\"isShowXY\" @close=\"closePopup\">\r\n\t\t\t\t<view class=\"fui-custom__wrap\">协议内容区</view>\r\n\t\t\t</fui-Bottom-Popup> -->\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\t// import fuiBottomPopup from \"@/components/firstui/fui-bottom-popup/fui-bottom-popup.vue\"\r\n\t// import customAddress from \"@/components/custom-address.vue\"\r\n\timport util from \"../../utils/util.js\"\r\n\timport api from \"../../config/api.js\"\r\n\timport pay from \"../../services/pay.js\"\r\n\t// 上传\r\n\timport upload from './uploadImg.js'\r\n\t// import qiniu from 'qiniu'\r\n\r\n\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\t// fuiBottomPopup,\r\n\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\t// options: ['最新车讯', '降价排行', 'SUV', '违章罚单', '提车试驾', '测评体验', '选车指南', '美女车模', '加油优惠卡', '维修保养'],\r\n\t\t\t\t// tag: '请选择',\r\n\t\t\t\t// tagShow: false,\r\n\r\n\t\t\t\t// 要购买的票信息\r\n\t\t\t\tticketInfo: {\r\n\t\t\t\t\t// 成人票/儿童票等等\r\n\t\t\t\t\tguigeArr: [],\r\n\t\t\t\t\t// 时间 YY-MM-DD\r\n\t\t\t\t\tticketTime: \"\",\r\n\t\t\t\t\t// 专业票/公众日\r\n\t\t\t\t\tzp: \"\",\r\n\t\t\t\t\t// 实物票/电子票\r\n\t\t\t\t\tticketType: \"\"\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// 联系信息\r\n\t\t\t\tcontactInfo: {\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\tphone: '',\r\n\t\t\t\t},\r\n\t\t\t\tisValidPhone: false,\r\n\r\n\t\t\t\tisValidArr: [],\r\n\t\t\t\tisValidTax: false,\r\n\r\n\t\t\t\t// 邮寄地址\r\n\t\t\t\tcheckedAddress: {\r\n\t\t\t\t\tid: 0,\r\n\t\t\t\t\tname: '',\r\n\t\t\t\t\tis_default: 0,\r\n\t\t\t\t\tmobile: '',\r\n\t\t\t\t\tfull_region: '',\r\n\t\t\t\t\taddress: ''\r\n\t\t\t\t},\r\n\t\t\t\taddressId: 0,\r\n\t\t\t\tcouponId: 0,\r\n\r\n\t\t\t\t// 发票\r\n\t\t\t\tinvoices: {\r\n\t\t\t\t\ttype: \"\",\r\n\t\t\t\t\tname: \"\",\r\n\t\t\t\t\ttax_number: \"\"\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// \r\n\t\t\t\tisNeedCertification: 0,\r\n\t\t\t\tisNeedTicket: false,\r\n\t\t\t\t// 组件标志位\r\n\t\t\t\topenAttr: false,\r\n\t\t\t\t// 购物车列表\r\n\t\t\t\tcartGoods: [],\r\n\r\n\t\t\t\t// 是否展示弹窗\r\n\t\t\t\tisShowXY: false,\r\n\t\t\t\t// 是否接受协议\r\n\t\t\t\tisJieShow: false,\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(options) {\r\n\t\t\tconst {\r\n\t\t\t\tid,\r\n\t\t\t\tcategory_id\r\n\t\t\t} = options;\r\n\r\n\t\t\tconst ticketInfo = uni.getStorageSync('buyItem');\r\n\t\t\tthis.ticketInfo = JSON.parse(ticketInfo);\r\n\t\t\tthis.getIsValidArr();\r\n\t\t\tthis.setData({\r\n\t\t\t\tid: id,\r\n\t\t\t\tcategory_id: category_id\r\n\t\t\t})\r\n\t\t\tconsole.log(id, category_id)\r\n\r\n\t\t\t// try {\r\n\t\t\t// \tvar addressId = uni.getStorageSync('addressId');\r\n\r\n\t\t\t// \tif (addressId) {\r\n\t\t\t// \t\tthis.setData({\r\n\t\t\t// \t\t\taddressId: addressId\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\r\n\t\t\t// \tvar couponId = uni.getStorageSync('couponId');\r\n\r\n\t\t\t// \tif (couponId) {\r\n\t\t\t// \t\tthis.setData({\r\n\t\t\t// \t\t\tcouponId: couponId\r\n\t\t\t// \t\t});\r\n\t\t\t// \t}\r\n\t\t\t// \tthis.getCheckoutInfo();\r\n\t\t\t// } catch (e) {\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t// \t// Do something when catch error\r\n\t\t\t// }\r\n\r\n\r\n\t\t\t// console.log(this.ticketInfo)\r\n\t\t\t// console.log(this.isValidArr);\r\n\t\t},\r\n\r\n\t\tonShow() {\r\n\t\t\tvar addressId = uni.getStorageSync('addressId');\r\n\t\t\tif (addressId) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\taddressId: addressId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tvar couponId = uni.getStorageSync('couponId');\r\n\t\t\tif (couponId) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tcouponId: couponId\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tthis.getCheckoutInfo();\r\n\t\t},\r\n\r\n\r\n\t\tcomputed: {\r\n\r\n\t\t\t// 证件信息\r\n\t\t\tcertificationInfo() {\r\n\t\t\t\tconst guiGeArr = this.ticketInfo.guigeArr;\r\n\t\t\t\tconst filterArr = [];\r\n\r\n\t\t\t\tguiGeArr.forEach(item => {\r\n\r\n\t\t\t\t\tif (item.chooseCount > 0 && item.goods_number > 0) {\r\n\t\t\t\t\t\tfor (let i = item.chooseCount; i > 0; i--) {\r\n\t\t\t\t\t\t\tfilterArr.push(item);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// return item.chooseCount > 0 && item.goods_number > 0\r\n\t\t\t\t})\r\n\r\n\r\n\t\t\t\treturn filterArr.map(item => {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tticketTime: item.ticketTime,\r\n\t\t\t\t\t\tguiGe: item.guiGe,\r\n\t\t\t\t\t\tname: \"\",\r\n\t\t\t\t\t\tcard: \"\",\r\n\t\t\t\t\t\tcardImgFront: \"\",\r\n\t\t\t\t\t\tcardImgBehind: \"\",\r\n\t\t\t\t\t\tcardImgElectron: \"\"\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 总额\r\n\t\t\ttotalMoney() {\r\n\t\t\t\tlet money = 0;\r\n\t\t\t\tthis.ticketInfo.guigeArr.forEach(item => {\r\n\t\t\t\t\t// 单价*数量\r\n\t\t\t\t\tmoney += item.retail_price * item.chooseCount;\r\n\t\t\t\t})\r\n\t\t\t\treturn money\r\n\t\t\t}\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tindexToNumber(index) {\r\n\t\t\t\tswitch (index + 1) {\r\n\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\treturn '①'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\treturn '②'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\treturn '③'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 4:\r\n\t\t\t\t\t\treturn '④'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 5:\r\n\t\t\t\t\t\treturn '⑤'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 6:\r\n\t\t\t\t\t\treturn '⑥'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 7:\r\n\t\t\t\t\t\treturn '⑦'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 8:\r\n\t\t\t\t\t\treturn '⑧'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 9:\r\n\t\t\t\t\t\treturn '⑨'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tcase 10:\r\n\t\t\t\t\t\treturn '⑩'\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\treturn index;\r\n\t\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tonCardImgElectron(index) {\r\n\t\t\t\tconst item = this.certificationInfo[index];\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: [\"original\", \"compressed\"], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: [\"album\", \"camera\"], //从相册选择\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\titem.cardImgElectron = tempFilePaths;\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: \"正在上传...\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// 获取七牛token\r\n\t\t\t\t\t\tlet uptoken = '';\r\n\t\t\t\t\t\tutil.request('https://beijing.biubbmk.cn/airshow/api/user/uptoken').then(response => {\r\n\t\t\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\t\t\tuptoken = response.uptoken;\r\n\r\n\t\t\t\t\t\t\tlet img = res.tempFilePaths[0]; //拿到里面的\r\n\t\t\t\t\t\t\t//下面的key是自己拿时间戳和随机数组成的key值\r\n\t\t\t\t\t\t\tlet key = new Date().getTime();\r\n\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\turl: \"https://up-z2.qiniup.com\", //华南地区上传\r\n\t\t\t\t\t\t\t\tfilePath: img,\r\n\t\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t'key': key, //key值\r\n\t\t\t\t\t\t\t\t\t'token': uptoken //七牛云token值\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: uploadFileRes => {\r\n\t\t\t\t\t\t\t\t\t//uploadFileRes 返回了data是一个json字符串 \r\n\t\t\t\t\t\t\t\t\t//拿到里面的key拼接上域名，再反出去就ok了\r\n\t\t\t\t\t\t\t\t\tlet strToObj = JSON.parse(uploadFileRes.data),\r\n\t\t\t\t\t\t\t\t\t\tbackUrl =\r\n\t\t\t\t\t\t\t\t\t\t'http://rnwwnc95c.hn-bkt.clouddn.com/' +\r\n\t\t\t\t\t\t\t\t\t\tstrToObj.key;\r\n\t\t\t\t\t\t\t\t\tconsole.log(backUrl)\r\n\t\t\t\t\t\t\t\t\t// data.success(backUrl); //反出去链接\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: fail => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"网络错误\",\r\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tconsole.log(fail)\r\n\t\t\t\t\t\t\t\t\t// data.fail(fail); //反出去错误信息\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// return;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpreviewCardImgElectron(index) {\r\n\t\t\t\tconst item = this.certificationInfo[index];\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: 1,\r\n\t\t\t\t\turls: item.cardImgElectron,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\r\n\t\t\tpreviewCardImgFront(index) {\r\n\t\t\t\tconst item = this.certificationInfo[index];\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tcurrent: 1,\r\n\t\t\t\t\turls: item.cardImgFront,\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: err => {\r\n\t\t\t\t\t\tconsole.log(err)\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonCardImgFront(index) {\r\n\t\t\t\tconst item = this.certificationInfo[index];\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: [\"original\", \"compressed\"], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: [\"album\", \"camera\"], //从相册选择\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\titem.cardImgFront = tempFilePaths;\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: \"正在上传...\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// 获取七牛token\r\n\t\t\t\t\t\tlet uptoken = '';\r\n\t\t\t\t\t\tutil.request(api.uploadImg).then(response => {\r\n\t\t\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\t\t\tuptoken = response.uptoken;\r\n\r\n\t\t\t\t\t\t\tlet img = res.tempFilePaths[0]; //拿到里面的\r\n\t\t\t\t\t\t\t//下面的key是自己拿时间戳和随机数组成的key值\r\n\t\t\t\t\t\t\tlet key = new Date().getTime();\r\n\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\turl: api.qiniuyunUrl, //华南地区上传\r\n\t\t\t\t\t\t\t\tfilePath: img,\r\n\t\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t'key': key, //key值\r\n\t\t\t\t\t\t\t\t\t'token': uptoken //七牛云token值\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: uploadFileRes => {\r\n\t\t\t\t\t\t\t\t\t//uploadFileRes 返回了data是一个json字符串 \r\n\t\t\t\t\t\t\t\t\t//拿到里面的key拼接上域名，再反出去就ok了\r\n\t\t\t\t\t\t\t\t\tlet strToObj = JSON.parse(uploadFileRes.data),\r\n\t\t\t\t\t\t\t\t\t\tbackUrl =\r\n\t\t\t\t\t\t\t\t\t\tapi.qiniuyunBackUrl +\r\n\t\t\t\t\t\t\t\t\t\tstrToObj.key;\r\n\t\t\t\t\t\t\t\t\tconsole.log(backUrl)\r\n\t\t\t\t\t\t\t\t\t// data.success(backUrl); //反出去链接\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: fail => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"网络错误\",\r\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tconsole.log(fail)\r\n\t\t\t\t\t\t\t\t\t// data.fail(fail); //反出去错误信息\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// return;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpreviewCardImgBehind(index) {\r\n\t\t\t\tconst item = this.certificationInfo[index];\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: item.CardImgBehind\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonCardImgBehind(index) {\r\n\t\t\t\tconst item = this.certificationInfo[index];\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: [\"original\", \"compressed\"], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsourceType: [\"album\", \"camera\"], //从相册选择\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tconst tempFilePaths = res.tempFilePaths;\r\n\t\t\t\t\t\titem.cardImgBehind = tempFilePaths;\r\n\t\t\t\t\t\tuni.showLoading({\r\n\t\t\t\t\t\t\ttitle: \"正在上传...\",\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\t// 获取七牛token\r\n\t\t\t\t\t\tlet uptoken = '';\r\n\t\t\t\t\t\tutil.request(api.uploadImg).then(response => {\r\n\t\t\t\t\t\t\t// console.log(res)\r\n\t\t\t\t\t\t\tuptoken = response.uptoken;\r\n\r\n\t\t\t\t\t\t\tlet img = res.tempFilePaths[0]; //拿到里面的\r\n\t\t\t\t\t\t\t//下面的key是自己拿时间戳和随机数组成的key值\r\n\t\t\t\t\t\t\tlet key = new Date().getTime();\r\n\t\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\t\turl: api.qiniuyunUrl, //华南地区上传\r\n\t\t\t\t\t\t\t\tfilePath: img,\r\n\t\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\t\tmethod: \"POST\",\r\n\t\t\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t\t\t'key': key, //key值\r\n\t\t\t\t\t\t\t\t\t'token': uptoken //七牛云token值\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tsuccess: uploadFileRes => {\r\n\t\t\t\t\t\t\t\t\t//uploadFileRes 返回了data是一个json字符串 \r\n\t\t\t\t\t\t\t\t\t//拿到里面的key拼接上域名，再反出去就ok了\r\n\t\t\t\t\t\t\t\t\tlet strToObj = JSON.parse(uploadFileRes.data),\r\n\t\t\t\t\t\t\t\t\t\tbackUrl =\r\n\t\t\t\t\t\t\t\t\t\tapi.qiniuyunBackUrl +\r\n\t\t\t\t\t\t\t\t\t\tstrToObj.key;\r\n\t\t\t\t\t\t\t\t\tconsole.log(backUrl)\r\n\t\t\t\t\t\t\t\t\tconsole.log(item.cardImgBehind)\r\n\t\t\t\t\t\t\t\t\t// data.success(backUrl); //反出去链接\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\tfail: fail => {\r\n\t\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\t\ttitle: \"网络错误\",\r\n\t\t\t\t\t\t\t\t\t\ticon: \"none\"\r\n\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\tconsole.log(fail)\r\n\t\t\t\t\t\t\t\t\t// data.fail(fail); //反出去错误信息\r\n\t\t\t\t\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\t// return;\r\n\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tonTypeInvoices(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.invoices.type = value;\r\n\t\t\t},\r\n\t\t\tonNameInvoices(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.invoices.name = value;\r\n\t\t\t},\r\n\t\t\tonTaxInvoices(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.invoices.tax_number = value;\r\n\t\t\t},\r\n\t\t\tvalidTax_Invoices() {\r\n\t\t\t\tconst tax_number = this.invoices.tax_number;\r\n\t\t\t\tthis.isValidTax = !util.checkTax(tax_number);\r\n\t\t\t},\r\n\t\t\tgetCheckoutInfo() {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(that.addressId, that.couponId);\r\n\t\t\t\tutil.request(api.CartCheckout, {\r\n\t\t\t\t\taddressId: that.addressId,\r\n\t\t\t\t\tcouponId: that.couponId\r\n\t\t\t\t}).then(function(res) {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tconsole.log(res.data);\r\n\t\t\t\t\t\tthat.setData({\r\n\t\t\t\t\t\t\t// checkedGoodsList: res.data.checkedGoodsList,\r\n\t\t\t\t\t\t\tcheckedAddress: res.data.checkedAddress,\r\n\t\t\t\t\t\t\t// actualPrice: res.data.actualPrice,\r\n\t\t\t\t\t\t\t// checkedCoupon: res.data.checkedCoupon,\r\n\t\t\t\t\t\t\t// couponList: res.data.couponList,\r\n\t\t\t\t\t\t\t// couponPrice: res.data.couponPrice,\r\n\t\t\t\t\t\t\t// freightPrice: res.data.freightPrice,\r\n\t\t\t\t\t\t\t// goodsTotalPrice: res.data.goodsTotalPrice,\r\n\t\t\t\t\t\t\t// orderTotalPrice: res.data.orderTotalPrice\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tselectAddress() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/shopping/address/address'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\taddAddress() {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/shopping/addressAdd/addressAdd'\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tgetIsValidArr() {\r\n\t\t\t\tthis.isValidArr = this.certificationInfo.map(item => item = false);\r\n\t\t\t},\r\n\t\t\t// 校验身份证\r\n\t\t\tvalidCard(index) {\r\n\t\t\t\tconst card = this.certificationInfo[index].card;\r\n\r\n\t\t\t\tconst id =\r\n\t\t\t\t\t/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/;\r\n\r\n\t\t\t\tif (!id.test(card)) {\r\n\t\t\t\t\tthis.$set(this.isValidArr, index, true)\r\n\t\t\t\t}\r\n\t\t\t\tif (id.test(card)) {\r\n\t\t\t\t\tthis.$set(this.isValidArr, index, false)\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\tvalidPhone() {\r\n\t\t\t\tconst phone = this.contactInfo.phone\r\n\t\t\t\tthis.isValidPhone = !/^1[3|4|5|6|7|8|9][0-9]\\d{8}$/.test(phone)\r\n\t\t\t},\r\n\t\t\t// 联系信息\r\n\t\t\tonName(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.contactInfo.name = value;\r\n\t\t\t},\r\n\t\t\tonPhone(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.contactInfo.phone = value;\r\n\t\t\t},\r\n\t\t\t// 证件信息\r\n\t\t\tonCertiName(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcurrentTarget: {\r\n\t\t\t\t\t\tdataset: {\r\n\t\t\t\t\t\t\ti\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e)\r\n\t\t\t\tthis.certificationInfo[i].name = value;\r\n\t\t\t},\r\n\t\t\tonCertiCard(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t},\r\n\t\t\t\t\tcurrentTarget: {\r\n\t\t\t\t\t\tdataset: {\r\n\t\t\t\t\t\t\ti\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e);\r\n\t\t\t\tthis.certificationInfo[i].card = value;\r\n\t\t\t},\r\n\t\t\t// 邮寄地址\r\n\t\t\tonAdress(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\tthis.adressInfo.adress = value;\r\n\t\t\t},\r\n\r\n\t\t\tonJieShow(e) {\r\n\t\t\t\tconst {\r\n\t\t\t\t\tdetail: {\r\n\t\t\t\t\t\tvalue: [value]\r\n\t\t\t\t\t}\r\n\t\t\t\t} = e;\r\n\t\t\t\t// console.log(e.detail)\r\n\t\t\t\tthis.isJieShow = value == \"false\" ? true : false;\r\n\t\t\t\tconsole.log(this.isJieShow)\r\n\t\t\t},\r\n\r\n\r\n\r\n\t\t\t// tagTap() {\r\n\t\t\t// \tthis.$refs.ddmTag.show()\r\n\t\t\t// \tthis.tagShow = true;\r\n\t\t\t// },\r\n\t\t\t// tagItemClick(e) {\r\n\t\t\t// \tconsole.log(e)\r\n\t\t\t// \tthis.tag = e.text\r\n\t\t\t// \tthis.tagClose()\r\n\t\t\t// },\r\n\t\t\t// tagClose() {\r\n\t\t\t// \tthis.tagShow = false;\r\n\t\t\t// },\r\n\r\n\r\n\t\t\t// 是否稍后填写证件\r\n\t\t\tneedCertification() {\r\n\t\t\t\tthis.isNeedCertification = !this.isNeedCertification;\r\n\t\t\t},\r\n\t\t\t// 是否需要发票\r\n\t\t\tneedTicket() {\r\n\t\t\t\tthis.isNeedTicket = !this.isNeedTicket;\r\n\t\t\t},\r\n\r\n\t\t\timageUrl(isDui) {\r\n\t\t\t\treturn isDui ? '/static/images/buy/dui-2.png' : '/static/images/buy/dui.png'\r\n\t\t\t},\r\n\r\n\t\t\tshowPopup() {\r\n\t\t\t\tthis.isShowXY = true\r\n\t\t\t},\r\n\r\n\t\t\tclosePopup() {\r\n\t\t\t\tthis.isShowXY = false\r\n\t\t\t},\r\n\r\n\t\t\tasync buy() {\r\n\t\t\t\tuni.showLoading();\r\n\t\t\t\t// 校验表单\r\n\t\t\t\tif (!this.isCheckedAllSpec()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t// return;\r\n\t\t\t\ttry {\r\n\t\t\t\t\t// 删除购物车中的票类商品\r\n\t\t\t\t\tawait this.productDlete();\r\n\t\t\t\t\t// 购物车置空\r\n\t\t\t\t\tawait this.goodsClear();\r\n\t\t\t\t\t// 加入购物车\r\n\t\t\t\t\tlet guigeArr = this.ticketInfo.guigeArr;\r\n\t\t\t\t\tlet isWeekend = this.isWeekend(this.ticketInfo.choosetime);\r\n\t\t\t\t\tguigeArr = guigeArr.filter(item => item.chooseCount);\r\n\t\t\t\t\tfor (let i = 0; i < guigeArr.length; i++) {\r\n\t\t\t\t\t\tawait this.addToCart(guigeArr[i], i, isWeekend);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t// 调起支付\r\n\t\t\t\t\tthis.submitOrder();\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tutil.showErrorToast(err.errMsg)\r\n\t\t\t\t}\r\n\r\n\t\t\t},\r\n\t\t\tisWeekend(date) {\r\n\t\t\t\tconst dayOfWeek = new Date(date).getDay();\r\n\t\t\t\treturn dayOfWeek === 6 || dayOfWeek === 0;\r\n\t\t\t},\r\n\r\n\t\t\t// 校验\r\n\t\t\tisCheckedAllSpec() {\r\n\t\t\t\tconst isValidPhone = this.isValidPhone;\r\n\t\t\t\tconst isValidArr = this.isValidArr;\r\n\t\t\t\tconst card = this.certificationInfo.map(item => item = item.card);\r\n\t\t\t\tconst cardImgFront = this.certificationInfo.map(item => item = item.cardImgFront);\r\n\t\t\t\tconst cardImgBehind = this.certificationInfo.map(item => item = item.cardImgBehind);\r\n\t\t\t\tconst cardImgElectron = this.certificationInfo.map(item => item = item.cardImgElectron);\r\n\t\t\t\tconst phone = this.contactInfo.phone;\r\n\t\t\t\tconst isJieShow = this.isJieShow;\r\n\t\t\t\tconst ticketInfo = this.ticketInfo;\r\n\r\n\t\t\t\t// 如果还有表单未校验成功\r\n\t\t\t\tif (\r\n\t\t\t\t\tisValidPhone == true ||\r\n\t\t\t\t\tisValidArr.indexOf(true) != -1 ||\r\n\t\t\t\t\tcard.filter(item => item.length == 0 ? true : false).length > 0 ||\r\n\t\t\t\t\tphone.length == 0 ||\r\n\t\t\t\t\t// 身份证图片上传\r\n\t\t\t\t\t(\r\n\t\t\t\t\t\tticketInfo.zp == '专业日' &&\r\n\t\t\t\t\t\t(\r\n\t\t\t\t\t\t\tcardImgFront.filter(item => item.length == 0 ? true : false).length > 0 ||\r\n\t\t\t\t\t\t\tcardImgBehind.filter(item => item.length == 0 ? true : false).length > 0 ||\r\n\t\t\t\t\t\t\tcardImgElectron.filter(item => item.length == 0 ? true : false).length > 0\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t)\r\n\t\t\t\t) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\timage: '/static/static/images/icon_error.png',\r\n\t\t\t\t\t\ttitle: '请填写完整',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\r\n\t\t\t\tconsole.log(isJieShow);\r\n\r\n\t\t\t\tif (isJieShow == false) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\timage: '/static/static/images/icon_error.png',\r\n\t\t\t\t\t\ttitle: '请勾选协议',\r\n\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t});\r\n\t\t\t\t\treturn false\r\n\t\t\t\t}\r\n\t\t\t\treturn true\r\n\t\t\t},\r\n\r\n\t\t\t// 加入购物车\r\n\t\t\tasync addToCart(ticket, index, isWeekend) {\r\n\r\n\t\t\t\tthis.certificationInfo[index][\"choosetime\"] = this.ticketInfo.choosetime;\r\n\t\t\t\tconsole.log(this.certificationInfo[index]);\r\n\t\t\t\tawait util.request(\r\n\t\t\t\t\tapi.CartAdd, {\r\n\t\t\t\t\t\tgoodsId: this.id,\r\n\t\t\t\t\t\t// 该票的张数\r\n\t\t\t\t\t\tnumber: ticket.chooseCount,\r\n\t\t\t\t\t\t// 该票的id\r\n\t\t\t\t\t\tproductId: ticket.id,\r\n\t\t\t\t\t\t// category_id??\r\n\t\t\t\t\t\tcategory_id: this.category_id,\r\n\t\t\t\t\t\tcertification: JSON.stringify([this.certificationInfo[index]]),\r\n\t\t\t\t\t\tisWeekend\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t).then(res => {\r\n\t\t\t\t\tlet _res = res;\r\n\r\n\t\t\t\t\tif (_res.errno == 0) {} else {\r\n\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\timage: '/static/static/images/icon_error.png',\r\n\t\t\t\t\t\t\ttitle: _res.errmsg,\r\n\t\t\t\t\t\t\tmask: true\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\t// 购物车置空\r\n\t\t\tasync goodsClear() {\r\n\t\t\t\tawait util.request(\r\n\t\t\t\t\tapi.goodsClear, {},\r\n\t\t\t\t\t'GET'\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\t// 删除购物车中的票类商品\r\n\t\t\tasync productDlete() {\r\n\t\t\t\tawait util.request(\r\n\t\t\t\t\tapi.productDlete, {\r\n\t\t\t\t\t\tgoods_id: this.id\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t)\r\n\t\t\t},\r\n\r\n\t\t\t// 调起支付\r\n\t\t\tsubmitOrder() {\r\n\t\t\t\t// if (this.addressId <= 0) {\r\n\t\t\t\t// \tutil.showErrorToast('请选择收货地址');\r\n\t\t\t\t// \treturn false;\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tutil.request(\r\n\t\t\t\t\tapi.OrderSubmit, {\r\n\t\t\t\t\t\taddressId: this.addressId,\r\n\t\t\t\t\t\tcouponId: this.couponId,\r\n\t\t\t\t\t\t// category_id??\r\n\t\t\t\t\t\tcategory_id: this.category_id,\r\n\t\t\t\t\t\t// 是否需要地址\r\n\t\t\t\t\t\tisNoNeedAddress: this.ticketInfo.ticketType == '电子票' ? true : false,\r\n\t\t\t\t\t\t// 联系信息\r\n\t\t\t\t\t\tname: this.contactInfo.name,\r\n\t\t\t\t\t\tphone: this.contactInfo.phone,\r\n\t\t\t\t\t\t// 证件信息\r\n\t\t\t\t\t\t// certification: JSON.stringify(this.certificationInfo),\r\n\t\t\t\t\t\t// 需要发票\r\n\t\t\t\t\t\tisNeedTicket: this.isNeedTicket,\r\n\t\t\t\t\t\t// 发票信息\r\n\t\t\t\t\t\tinvoices: JSON.stringify(this.invoices)\r\n\t\t\t\t\t},\r\n\t\t\t\t\t'POST'\r\n\t\t\t\t).then((res) => {\r\n\t\t\t\t\tif (res.errno === 0) {\r\n\t\t\t\t\t\tconst orderId = res.data.orderInfo.id;\r\n\t\t\t\t\t\tpay.payOrder(parseInt(orderId))\r\n\t\t\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/payResult/payResult?status=1&orderId=' +\r\n\t\t\t\t\t\t\t\t\t\torderId\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((res) => {\r\n\t\t\t\t\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\t\t\t\t\turl: '/pages/payResult/payResult?status=0&orderId=' +\r\n\t\t\t\t\t\t\t\t\t\torderId\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tutil.showErrorToast('下单失败');\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(err => {\r\n\t\t\t\t\tutil.showErrorToast('下单失败');\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t}\r\n\r\n\t}\r\n</script>\r\n\r\n<style>\r\n\t@import url(\"./buy.css\");\r\n</style>\n","import mod from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../Applications/HBuilderX-Alpha.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./buy.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}
(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/shopping/checkoutNew/checkoutNew"],{249:function(e,t,n){"use strict";(function(e){n(5);r(n(4));var t=r(n(250));function r(e){return e&&e.__esModule?e:{default:e}}wx.__webpack_require_UNI_MP_PLUGIN__=n,e(t.default)}).call(this,n(1)["createPage"])},250:function(e,t,n){"use strict";n.r(t);var r=n(251),o=n(253);for(var i in o)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return o[e]}))}(i);n(255);var a,c=n(13),d=Object(c["default"])(o["default"],r["render"],r["staticRenderFns"],!1,null,null,null,!1,r["components"],a);d.options.__file="pages/shopping/checkoutNew/checkoutNew.vue",t["default"]=d.exports},251:function(e,t,n){"use strict";n.r(t);var r=n(252);n.d(t,"render",(function(){return r["render"]})),n.d(t,"staticRenderFns",(function(){return r["staticRenderFns"]})),n.d(t,"recyclableRender",(function(){return r["recyclableRender"]})),n.d(t,"components",(function(){return r["components"]}))},252:function(e,t,n){"use strict";var r;n.r(t),n.d(t,"render",(function(){return o})),n.d(t,"staticRenderFns",(function(){return a})),n.d(t,"recyclableRender",(function(){return i})),n.d(t,"components",(function(){return r}));var o=function(){var e=this,t=e.$createElement,n=(e._self._c,1036010==e.category_id?e.__map(e.checkedGoodsList,(function(t,n){var r=e.__get_orig(t),o=e.indexToNumber(n),i=e.indexToNumber(n);return{$orig:r,m0:o,m1:i}})):null);e.$mp.data=Object.assign({},{$root:{l0:n}})},i=!1,a=[];o._withStripped=!0},253:function(e,t,n){"use strict";n.r(t);var r=n(254),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},254:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(9),o=n(10),i=n(32),a=(getApp(),{data:function(){return{checkedGoodsList:[],checkedAddress:{id:0,name:"",is_default:0,mobile:"",full_region:"",address:""},checkedCoupon:[],couponList:[],goodsTotalPrice:0,freightPrice:0,couponPrice:0,orderTotalPrice:0,actualPrice:0,addressId:0,couponId:0,certificationInfo:{name:"",card:""},isValidCertification:!1,choosetime:""}},onLoad:function(t){var n=t.choosetime;try{var r=e.getStorageSync("addressId");r&&this.setData({addressId:r});var o=e.getStorageSync("couponId");o&&this.setData({couponId:o}),console.log(t),this.setData({category_id:Number(t.category_id),choosetime:n})}catch(i){}},onReady:function(){},onShow:function(){e.showLoading({title:"加载中..."}),this.getCheckoutInfo()},onHide:function(){},onUnload:function(){},methods:{onCertiName:function(e){var t=e.detail.value;e.currentTarget.dataset.i;this.certificationInfo.name=t},onCertiCard:function(e){var t=e.detail.value;e.currentTarget.dataset.i;this.certificationInfo.card=t},validCard:function(){var e=this.certificationInfo.card,t=/^[1-9][0-9]{5}(19|20)[0-9]{2}((01|03|05|07|08|10|12)(0[1-9]|[1-2][0-9]|3[0-1])|(04|06|09|11)(0[1-9]|[1-2][0-9]|30)|02(0[1-9]|[1-2][0-9]))[0-9]{3}([0-9]|x|X)$/;t.test(e)||(this.isValidCertification=!0),t.test(e)&&(this.isValidCertification=!1)},indexToNumber:function(e){switch(e+1){case 1:return"①";case 2:return"②";case 3:return"③";case 4:return"④";case 5:return"⑤";case 6:return"⑥";case 7:return"⑦";case 8:return"⑧";case 9:return"⑨";case 10:return"⑩";default:return e}},getCheckoutInfo:function(){var t=this;r.request(o.CartCheckout,{addressId:t.addressId,couponId:t.couponId}).then((function(n){0===n.errno&&(console.log(n.data),t.setData({checkedGoodsList:n.data.checkedGoodsList,checkedAddress:n.data.checkedAddress,actualPrice:n.data.actualPrice,checkedCoupon:n.data.checkedCoupon,couponList:n.data.couponList,couponPrice:n.data.couponPrice,freightPrice:n.data.freightPrice,goodsTotalPrice:n.data.goodsTotalPrice,orderTotalPrice:n.data.orderTotalPrice})),e.hideLoading()}))},selectAddress:function(){e.navigateTo({url:"/pages/shopping/address/address"})},addAddress:function(){e.navigateTo({url:"/pages/shopping/addressAdd/addressAdd"})},isWx:function(){var e,t,n=(null===(e=navigator)||void 0===e||null===(t=e.userAgent)||void 0===t?void 0:t.toLowerCase)&&navigator.userAgent.toLowerCase();return!!/micromessenger/.test(n)},submitOrder:function(){var t=this.isValidCertification,n=this.certificationInfo.card;this.certificationInfo["choosetime"]=this.choosetime,console.log(this.choosetime),1!=t&&0!=n.length||1036010!=this.category_id?r.request(o.OrderSubmit,{addressId:this.addressId,couponId:this.couponId,certification:JSON.stringify([this.certificationInfo]),category_id:this.category_id},"POST").then((function(t){if(0===t.errno){var n=t.data.orderInfo.id;i.payOrder(parseInt(n)).then((function(t){e.redirectTo({url:"/pages/payResult/payResult?status=1&orderId="+n})})).catch((function(t){e.redirectTo({url:"/pages/payResult/payResult?status=0&orderId="+n})}))}else r.showErrorToast("下单失败")})):r.showErrorToast("身份证填写不正确噢")}}});t.default=a}).call(this,n(1)["default"])},255:function(e,t,n){"use strict";n.r(t);var r=n(256),o=n.n(r);for(var i in r)["default"].indexOf(i)<0&&function(e){n.d(t,e,(function(){return r[e]}))}(i);t["default"]=o.a},256:function(e,t,n){}},[[249,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../../.sourcemap/mp-weixin/pages/shopping/checkoutNew/checkoutNew.js.map